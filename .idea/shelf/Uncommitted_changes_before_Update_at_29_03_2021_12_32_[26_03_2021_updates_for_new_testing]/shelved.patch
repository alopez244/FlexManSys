Index: src/resources/Results/MP5.xml
===================================================================
diff --git a/src/resources/Results/MP5.xml b/src/resources/Results/MP5.xml
deleted file mode 100644
--- a/src/resources/Results/MP5.xml	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ /dev/null	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
@@ -1,144 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<PlanLevel planReference="5">
-    <OrderLevel orderReference="51">
-        <BatchLevel Data_Service_Time_Stamp="2025/3/14 23:0:0" batchReference="511">
-            <TypeOfProduct description="Big product" itemID="5116" productType="1" refRecipe="recipe02">
-                <action actualMachineId="11" actualStationId="11" description="place cover" finishTime="2023/12/24 18:15:12" id="4" startTime="2021/1/27 10:59:43" type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId="11" actualStationId="11" description="insert upper bearing" finishTime="2023/12/24 18:15:12" id="3" startTime="2021/1/27 10:59:43" type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId="11" actualStationId="11" description="insert axis" finishTime="2023/12/24 18:15:12" id="2" startTime="2021/1/27 10:59:43" type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId="11" actualStationId="11" description="insert lower bearing" finishTime="2023/12/24 18:15:12" id="1" startTime="2021/1/27 10:59:43" type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="5115" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="5114" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="5113" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="5112" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-        </BatchLevel>
-        <BatchLevel Data_Service_Time_Stamp="2025/3/14 23:0:0" batchReference="512">
-            <TypeOfProduct description="Big product" itemID="5124" productType="1" refRecipe="recipe02">
-                <action actualMachineId="31" actualStationId="31" description="place cover" finishTime="2023/12/24 18:15:12" id="4" startTime="2021/1/27 10:59:43" type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId="21" actualStationId="21" description="insert upper bearing" finishTime="2023/12/24 18:15:12" id="3" startTime="2021/1/27 10:59:43" type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId="21" actualStationId="21" description="insert axis" finishTime="2023/12/24 18:15:12" id="2" startTime="2021/1/27 10:59:43" type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId="21" actualStationId="21" description="insert lower bearing" finishTime="2023/12/24 18:15:12" id="1" startTime="2021/1/27 10:59:43" type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="5123" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="5122" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="5121" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-        </BatchLevel>
-    </OrderLevel>
-</PlanLevel>
Index: src/resources/Results/MP2.xml
===================================================================
diff --git a/src/resources/Results/MP2.xml b/src/resources/Results/MP2.xml
deleted file mode 100644
--- a/src/resources/Results/MP2.xml	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ /dev/null	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
@@ -1,131 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<PlanLevel planReference="2">
-    <OrderLevel orderReference="21">
-        <BatchLevel Data_Service_Time_Stamp="2025/3/14 23:0:0" batchReference="211">
-            <TypeOfProduct description="Big product" itemID="2115" productType="1" refRecipe="recipe02">
-                <action actualMachineId="11" actualStationId="11" description="place cover" finishTime="2023/12/24 18:15:12" id="4" startTime="2021/1/27 10:59:43" type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId="11" actualStationId="11" description="insert upper bearing" finishTime="2023/12/24 18:15:12" id="3" startTime="2021/1/27 10:59:43" type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId="11" actualStationId="11" description="insert axis" finishTime="2023/12/24 18:15:12" id="2" startTime="2021/1/27 10:59:43" type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId="11" actualStationId="11" description="insert lower bearing" finishTime="2023/12/24 18:15:12" id="1" startTime="2021/1/27 10:59:43" type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="2114" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="2113" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="2112" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="2111" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-        </BatchLevel>
-    </OrderLevel>
-    <OrderLevel orderReference="22">
-        <BatchLevel Data_Service_Time_Stamp="2025/3/14 23:0:0" batchReference="221">
-            <TypeOfProduct description="Big product" itemID="2213" productType="1" refRecipe="recipe02">
-                <action actualMachineId="41" actualStationId="41" description="place cover" finishTime="2023/12/24 18:15:12" id="4" startTime="2021/1/27 10:59:43" type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId="41" actualStationId="41" description="insert upper bearing" finishTime="2023/12/24 18:15:12" id="3" startTime="2021/1/27 10:59:43" type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId="41" actualStationId="41" description="insert axis" finishTime="2023/12/24 18:15:12" id="2" startTime="2021/1/27 10:59:43" type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId="41" actualStationId="41" description="insert lower bearing" finishTime="2023/12/24 18:15:12" id="1" startTime="2021/1/27 10:59:43" type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="2212" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="2211" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-        </BatchLevel>
-    </OrderLevel>
-</PlanLevel>
Index: src/resources/Results/MP1.xml
===================================================================
diff --git a/src/resources/Results/MP1.xml b/src/resources/Results/MP1.xml
deleted file mode 100644
--- a/src/resources/Results/MP1.xml	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ /dev/null	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
@@ -1,131 +0,0 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<PlanLevel planReference="1">
-    <OrderLevel orderReference="11">
-        <BatchLevel Data_Service_Time_Stamp="2025/3/14 23:0:0" batchReference="111">
-            <TypeOfProduct description="Big product" itemID="1115" productType="1" refRecipe="recipe02">
-                <action actualMachineId="11" actualStationId="11" description="place cover" finishTime="2023/12/24 18:15:12" id="4" startTime="2021/1/27 10:59:43" type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId="11" actualStationId="11" description="insert upper bearing" finishTime="2023/12/24 18:15:12" id="3" startTime="2021/1/27 10:59:43" type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId="11" actualStationId="11" description="insert axis" finishTime="2023/12/24 18:15:12" id="2" startTime="2021/1/27 10:59:43" type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId="11" actualStationId="11" description="insert lower bearing" finishTime="2023/12/24 18:15:12" id="1" startTime="2021/1/27 10:59:43" type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="1114" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="1113" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="1112" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="1111" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-        </BatchLevel>
-    </OrderLevel>
-    <OrderLevel orderReference="12">
-        <BatchLevel Data_Service_Time_Stamp="2025/3/14 23:0:0" batchReference="121">
-            <TypeOfProduct description="Big product" itemID="1213" productType="1" refRecipe="recipe02">
-                <action actualMachineId="11" actualStationId="11" description="place cover" finishTime="2023/12/24 18:15:12" id="4" startTime="2021/1/27 10:59:43" type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId="11" actualStationId="11" description="insert upper bearing" finishTime="2023/12/24 18:15:12" id="3" startTime="2021/1/27 10:59:43" type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId="11" actualStationId="11" description="insert axis" finishTime="2023/12/24 18:15:12" id="2" startTime="2021/1/27 10:59:43" type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId="11" actualStationId="11" description="insert lower bearing" finishTime="2023/12/24 18:15:12" id="1" startTime="2021/1/27 10:59:43" type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="1212" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-            <TypeOfProduct description="Big product" itemID="1211" productType="1" refRecipe="recipe02">
-                <action actualMachineId=" " actualStationId=" " description="place cover" finishTime=" " id="4" startTime=" " type="pick_and_place"/>
-                <TypeOfProduct description="BB_A + upper bearing" productType="BB_B2">
-                    <action actualMachineId=" " actualStationId=" " description="insert upper bearing" finishTime=" " id="3" startTime=" " type="insert"/>
-                    <TypeOfProduct description="BB_B + axis" productType="BB_A">
-                        <action actualMachineId=" " actualStationId=" " description="insert axis" finishTime=" " id="2" startTime=" " type="insert"/>
-                        <TypeOfProduct description="BB + lower bearing" productType="BB_B">
-                            <action actualMachineId=" " actualStationId=" " description="insert lower bearing" finishTime=" " id="1" startTime=" " type="insert"/>
-                            <TypeOfProduct description="Big base" productType="BB">
-                                <rawMaterial description="Big base" id="BB"/>
-                            </TypeOfProduct>
-                        </TypeOfProduct>
-                    </TypeOfProduct>
-                </TypeOfProduct>
-            </TypeOfProduct>
-        </BatchLevel>
-    </OrderLevel>
-</PlanLevel>
Index: odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/ODK_AgentPLC_Real.cpp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#include \"stdafx.h\"\r\n#include \"ODK_Functions.h\"\r\n#include \"ODK_StringHelper.h\"\r\n#include \"tchar.h\"\r\n\r\n#include <jni.h>\r\n#include \"userDefines.h\"\r\n#include <string>\r\n#include <iostream>\r\n#include <fstream> \r\n#include \"nlohmann\\json.hpp\"\r\nusing json = nlohmann::json;\r\n\r\n// Include MQTT library\r\n#include \"include/MQTTClient.h\"\r\n\r\nMQTTClient client;\r\n\r\n\r\n/*\r\n * OnLoad() is invoked after the application binary was loaded.\r\n * @return ODK_SUCCESS       notify, that no error occurs\r\n *                            - OnRun() will be invoked automatically\r\n *         any other value   notify, that an error occurs (user defined)\r\n *                            - OnUnload() will be invoked automatically\r\n *                            - ODK application will be unloaded automatically\r\n */\r\nEXPORT_API ODK_RESULT OnLoad(void)\r\n{\r\n\t/*Aquí creo un fichero para debuguear*/\r\n\tstd::ofstream debugFile;\r\n\r\n\t/*Aquí indico la ruta del fichero de debuguear*/\r\n\tdebugFile.open(\"C:\\\\Users\\\\aabadia004\\\\Documents\\\\debugFile.txt\", std::ios_base::app);\r\n\r\n\t/*Aquí escribo que la carga se ha completado*/\r\n\tdebugFile << \"Loading process completed.\";\r\n\t/*Aquí cierro el fichero de debugueo*/\r\n\tdebugFile.close();\r\n\r\n\treturn ODK_SUCCESS;\r\n}\r\n\r\n/*\r\n * OnUnload() is invoked before the application binary is unloaded or when\r\n *            ODK-Host terminates.\r\n * @return ODK_SUCCESS       notify, that no error occurs\r\n *         any other value   notify, that an error occurs (user defined)\r\n *                            - ODK application will be unloaded anyway\r\n */\r\nEXPORT_API ODK_RESULT OnUnload(void)\r\n{\r\n\t// place your code here\r\n\treturn ODK_SUCCESS;\r\n}\r\n\r\n/*\r\n * OnRun() is invoked when the CPU transitions to the RUN state and\r\n *         after OnLoad().\r\n * @return Does not affect the load operation or state transition.\r\n */\r\nEXPORT_API ODK_RESULT OnRun(void)\r\n{\r\n\t// place your code here\r\n\treturn ODK_SUCCESS;\r\n}\r\n\r\n/*\r\n * OnStop() is invoked when the CPU transitions to the STOP/SHUTDOWN state\r\n *          or before unloading the ODK application.\r\n * @return Does not affect the load operation or state transition.\r\n */\r\nEXPORT_API ODK_RESULT OnStop(void)\r\n{\r\n\t// place your code here\r\n\treturn ODK_SUCCESS;\r\n}\r\n\r\n\r\nstd::string transformTimeStamp(unsigned long long TimeStamp)\r\n{\r\n\r\n\t/*Primero pasamos de nanosegundos a segundos*/\r\n\tunsigned long long seconds = TimeStamp / 1000000000;\r\n\r\n\t/*Segundo, pasamos a minutos y guardamos el resto*/\r\n\tunsigned long long minutes = seconds / 60;\r\n\tint seconds_remainder = seconds % 60;\r\n\r\n\t/*Tercero, pasamos a horas y guardamos el resto*/\r\n\tunsigned long long hours = minutes / 60;\r\n\tint minutes_remainder = minutes % 60;\r\n\r\n\t/*Cuarto, pasamos a días y guardamos el resto*/\r\n\tunsigned long long days = hours / 24;\r\n\tint hours_remainder = hours % 24;\r\n\r\n\t/*Quinto, calculamos el año primero para poder calcular después el mes con mayor precisión*/\r\n\tint years = (int)(1970 + ((days - ((days / 365) / 4)) / 365));\r\n\tint days_remainder;\r\n\r\n\tif (((days / 365) % 4) == 3 && (days % 365) >= ((days / 365) / 4))\r\n\t{\r\n\t\tdays_remainder = ((days - ((days / 365) / 4)) % 365);\r\n\r\n\t\tif (days_remainder == 0)\r\n\t\t{\r\n\t\t\tyears = years - 1;\r\n\t\t\tdays_remainder = 366;\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tdays_remainder = 1 + ((days - ((days / 365) / 4)) % 365);\r\n\t}\r\n\r\n\r\n\t/*Sexto, comprobamos si el año es bisiesto, y en funcion de eso se fijan el día y el mes*/\r\n\tint months = 0;\r\n\tif ((years % 4 == 0 && years % 100 != 0) || years % 400 == 0)\r\n\t{\r\n\t\t/*Es año bisiesto*/\r\n\t\tif (days_remainder <= 31)\r\n\r\n\t\t{\r\n\t\t\tmonths = 1;\r\n\t\t\t/*El mes es enero (1) y el día es lo que valga days_remainder*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 32 && days_remainder <= 60)\r\n\t\t{\r\n\t\t\tmonths = 2;\r\n\t\t\tdays_remainder = days_remainder - 31; /*El día es lo que vale days_remainder menos los días de enero*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 61 && days_remainder <= 91)\r\n\t\t{\r\n\t\t\tmonths = 3;\r\n\t\t\tdays_remainder = days_remainder - 60; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 92 && days_remainder <= 121)\r\n\t\t{\r\n\t\t\tmonths = 4;\r\n\t\t\tdays_remainder = days_remainder - 91; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 122 && days_remainder <= 152)\r\n\t\t{\r\n\t\t\tmonths = 5;\r\n\t\t\tdays_remainder = days_remainder - 121; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 153 && days_remainder <= 182)\r\n\t\t{\r\n\t\t\tmonths = 6;\r\n\t\t\tdays_remainder = days_remainder - 152; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 183 && days_remainder <= 213)\r\n\t\t{\r\n\t\t\tmonths = 7;\r\n\t\t\tdays_remainder = days_remainder - 182; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 214 && days_remainder <= 244)\r\n\t\t{\r\n\t\t\tmonths = 8;\r\n\t\t\tdays_remainder = days_remainder - 213; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 245 && days_remainder <= 274)\r\n\t\t{\r\n\t\t\tmonths = 9;\r\n\t\t\tdays_remainder = days_remainder - 244; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 275 && days_remainder <= 305)\r\n\t\t{\r\n\t\t\tmonths = 10;\r\n\t\t\tdays_remainder = days_remainder - 274; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 306 && days_remainder <= 335)\r\n\t\t{\r\n\t\t\tmonths = 11;\r\n\t\t\tdays_remainder = days_remainder - 305; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 335 && days_remainder <= 366)\r\n\t\t{\r\n\t\t\tmonths = 12;\r\n\t\t\tdays_remainder = days_remainder - 335; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\t/*No bisiesto*/\r\n\t\tif (days_remainder <= 31)\r\n\t\t{\r\n\t\t\tmonths = 1;\r\n\t\t\t/*El mes es enero (1) y el día es lo que valga days_remainder*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 32 && days_remainder <= 59)\r\n\t\t{\r\n\t\t\tmonths = 2;\r\n\t\t\tdays_remainder = days_remainder - 31; /*El día es lo que vale days_remainder menos los días de enero*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 60 && days_remainder <= 90)\r\n\t\t{\r\n\t\t\tmonths = 3;\r\n\t\t\tdays_remainder = days_remainder - 59; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 91 && days_remainder <= 120)\r\n\t\t{\r\n\t\t\tmonths = 4;\r\n\t\t\tdays_remainder = days_remainder - 90; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 121 && days_remainder <= 151)\r\n\t\t{\r\n\t\t\tmonths = 5;\r\n\t\t\tdays_remainder = days_remainder - 120; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 152 && days_remainder <= 181)\r\n\t\t{\r\n\t\t\tmonths = 6;\r\n\t\t\tdays_remainder = days_remainder - 151; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 182 && days_remainder <= 212)\r\n\t\t{\r\n\t\t\tmonths = 7;\r\n\t\t\tdays_remainder = days_remainder - 181; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 213 && days_remainder <= 243)\r\n\t\t{\r\n\t\t\tmonths = 8;\r\n\t\t\tdays_remainder = days_remainder - 212; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 244 && days_remainder <= 273)\r\n\t\t{\r\n\t\t\tmonths = 9;\r\n\t\t\tdays_remainder = days_remainder - 243; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 274 && days_remainder <= 304)\r\n\t\t{\r\n\t\t\tmonths = 10;\r\n\t\t\tdays_remainder = days_remainder - 273; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 305 && days_remainder <= 334)\r\n\t\t{\r\n\t\t\tmonths = 11;\r\n\t\t\tdays_remainder = days_remainder - 304; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t\telse if (days_remainder >= 334 && days_remainder <= 365)\r\n\t\t{\r\n\t\t\tmonths = 12;\r\n\t\t\tdays_remainder = days_remainder - 334; /*El día es lo que vale days_remainder menos el acumulado*/\r\n\t\t}\r\n\t}\r\n\r\n\tstd::string value;\r\n\tvalue = std::to_string(years); value += \"/\"; value += std::to_string(months); value += \"/\"; value += std::to_string(days_remainder); value += \" \"; value += std::to_string(hours_remainder); value += \":\"; value += std::to_string(minutes_remainder); value += \":\"; value += std::to_string(seconds_remainder);\r\n\treturn value;\r\n}\r\n\r\nvoid connectWithBroker() {\r\n\r\n\t/*Aquí creamos la conexión con el broker MQTT*/\r\n\tchar SERVER_ADDRESS[256] = \"192.168.2.240:30036\";\r\n\tchar CLIENT_ID[256] = \"odk_1\";\r\n\tchar TOPIC[256] = \"1\";\r\n\r\n\tMQTTClient_create(&client, SERVER_ADDRESS, CLIENT_ID, MQTTCLIENT_PERSISTENCE_NONE, NULL);\r\n\tMQTTClient_connectOptions conn_opts = MQTTClient_connectOptions_initializer;\r\n\r\n\tconn_opts.username = \"admin\";\r\n\tconn_opts.password = \"mosquittoGCIS\";\r\n\r\n\tint rc;\r\n\tif ((rc = MQTTClient_connect(client, &conn_opts)) != MQTTCLIENT_SUCCESS) {\r\n\t\t//debugFile << \"\\n Failed to connect, return code %d\\n\";\r\n\t}\r\n\t//debugFile << \"\\n Connection successful!\";\r\n\r\n\t/*Aquí cierro el fichero de debugueo*/\r\n\t//debugFile.close();\r\n}\r\n\r\nvoid publishData(char* TOPIC, char* payload) {\r\n\t//char TOPIC[256] = topic;\r\n\r\n\tMQTTClient_message pubmsg = MQTTClient_message_initializer;\r\n\tpubmsg.payload = payload;\r\n\tpubmsg.payloadlen = strlen(payload);\r\n\tpubmsg.qos = 0;\r\n\tpubmsg.retained = 0;\r\n\tMQTTClient_deliveryToken token;\r\n\tMQTTClient_publishMessage(client, TOPIC, &pubmsg, &token);\r\n\tMQTTClient_waitForCompletion(client, token, 1000L);\r\n\r\n}\r\n\r\nODK_RESULT initAgent() {\r\n\tstatic bool uniqueStart = false;\t//Variable to avoid multiple initializations\r\n\tif (!uniqueStart) {\t\t\t\t//It only happens on the first run\r\n\t\t/*Aquí creo un fichero para debuguear*/\r\n\t\tstd::ofstream debugFile;\r\n\r\n\t\t/*Aquí indico la ruta del fichero de debuguear*/\r\n\t\tdebugFile.open(\"C:\\\\Users\\\\aabadia004\\\\Documents\\\\debugFile.txt\", std::ios_base::app);\r\n\t\t/*Aquí escribo que la carga se ha completado*/\r\n\t\tdebugFile << \"Initializing Gateway Agent\";\r\n\t\tuniqueStart = true;\t\t\t//Update the flag to prevent it from being run again\r\n\t\tif (!JNIinit())\treturn ODK_USER_ERROR_BASE;\r\n\t\tjstring machineID = env->NewStringUTF(\"1\");\t//Se inicializa como agente gateway para la maquina 1\r\n\t\tenv->CallStaticIntMethod(cls, JNI_init, machineID);\t//Executes the init method using JNI\r\n\t\tenv->CallStaticObjectMethod(cls, JNI_recv);\t\t//Executes de recv method to initialize the gateway agent in JADE´s GUI\r\n\t\tdebugFile.close();\r\n\t}\r\n\treturn ODK_SUCCESS;\r\n}\r\n\r\n//Parses a String in JSON format and leave its data in a structure\r\nODK_RESULT SampleRead(/*OUT*/agent2plc& str_out, /*OUT*/ODK_BOOL& tRecv, /*OUT*/ODK_BOOL& tData, /*INOUT*/control_flags& flags) {\r\n\t\r\n\t/*Aquí modifico un fichero para debuguear*/\r\n\tstd::ofstream debugFile;\r\n\r\n\t/*Aquí indico la ruta del fichero de debuguear*/\r\n\tdebugFile.open(\"C:\\\\Users\\\\aabadia004\\\\Documents\\\\debugFile.txt\", std::ios_base::app);\r\n\r\n\t/*Aquí escribo que la carga se ha completado*/\r\n\tdebugFile << \"\\n ->ODK recvAgent\";\r\n\r\n\tif (!flags.Control_Flag_New_Service) {\r\n\r\n\tchar msgInCa[254] = { 0 };\t\t//An array is created to reserve that memory\r\n\tconst char* msgInC = msgInCa;\t//Pointer to array of characters is created\r\n\t//Executes the recv method through JNI and receives a jstring with the message to read\r\n\tdebugFile << \"\\n Looking for new message.\";\r\n\tjstring s = (jstring)env->CallStaticObjectMethod(cls, JNI_recv);\r\n\tmsgInC = env->GetStringUTFChars(s, 0);\t\t\t\t\t//Type conversion jstring->char*\r\n\tdebugFile << \"\\n Received message:\";\r\n\tdebugFile << msgInC;\r\n\r\n\tuint16_t ret;\t\t\t\t\t\t\t//Variable to store the result of the function\r\n\ttRecv = false;\r\n\ttData = false;\r\n\tdebugFile << \"\\n Parsing JSON to structure\";\r\n\tjson j = json::parse(msgInC);\t\t\t//The String is parsed and converted to a JSON object\r\n\tdebugFile << \"\\n Estructure obtained\";\r\n\tif (j.contains(\"Received\")) {\t\t\t//It is checked if it is a receipt confirmation\r\n\t\tdebugFile << \"\\n Received confirmation message.\";\r\n\t\tif (j[\"Received\"] == true) {\r\n\t\t\ttRecv = true;\r\n\t\t\tret = ODK_SUCCESS;\r\n\t\t}\r\n\t}\r\n\telse if (j.contains(\"Control_Flag_New_Service\")) {\t//At least the first field is checked\r\n\t\tdebugFile << \"\\n Receiving new operation.\";\r\n\t\ttData = true;\r\n\t\t//The received parameters are copied to the output structure\t\t\r\n\t\tflags.Control_Flag_New_Service = j[\"Control_Flag_New_Service\"].get<bool>();\r\n\t\tstr_out.Id_Machine_Reference = j[\"Id_Machine_Reference\"].get<int>();\r\n\t\tstr_out.Id_Order_Reference = j[\"Id_Order_Reference\"].get<int>();\r\n\t\tstr_out.Id_Batch_Reference = j[\"Id_Batch_Reference\"].get<int>();\r\n\t\tstr_out.Id_Ref_Subproduct_Type = j[\"Id_Ref_Subproduct_Type\"].get<int>();\r\n\t\tstr_out.Operation_Ref_Service_Type = j[\"Operation_Ref_Service_Type\"].get<int>();\r\n\t\tstr_out.Operation_No_of_Items = j[\"Operation_No_of_Items\"].get<int>();\r\n\r\n\t\tret = ODK_SUCCESS;\r\n\t}\r\n\telse {\r\n\t\tdebugFile << \"\\n No message has been received.\";\r\n\t\tret = ODK_SUCCESS;\r\n\t}\r\n\tdebugFile.close();\r\n\treturn ret;\r\n\r\n\t}\r\n}\r\n\r\n//From a data structure a String is generated in JSON format\r\nODK_RESULT SampleWrite(/*IN*/const control_flags& flags, /*IN*/const plc2agent& str_in) {\r\n\tjson j;\t//JSON Object\r\n\t//Each element of the structure is copied into a Json object\r\n\tj[\"Control_Flag_Item_Completed\"] = (bool)flags.Control_Flag_Item_Completed;\r\n\tj[\"Control_Flag_Service_Completed\"] = (bool)flags.Control_Flag_Service_Completed;\r\n\tj[\"Id_Machine_Reference\"] = (uint32_t)str_in.Id_Machine_Reference;\r\n\tj[\"Id_Order_Reference\"] = (uint32_t)str_in.Id_Order_Reference;\r\n\tj[\"Id_Batch_Reference\"] = (uint32_t)str_in.Id_Batch_Reference;\r\n\tj[\"Id_Ref_Subproduct_Type\"] = (uint32_t)str_in.Id_Ref_Subproduct_Type;\r\n\tj[\"Id_Ref_Service_Type\"] = (uint32_t)str_in.Id_Ref_Service_Type;\r\n\tj[\"Id_Item_Number\"] = (uint8_t)str_in.Id_Item_Number;\r\n\r\n\tunsigned long long Data_Initial_Time_Stamp_T = str_in.Data_Initial_Time_Stamp;\r\n\tunsigned long long Data_Final_Time_Stamp_T = str_in.Data_Final_Time_Stamp;\r\n\tunsigned long long Data_Service_Time_Stamp_T = str_in.Data_Service_Time_Stamp;\r\n\r\n\tj[\"Data_Initial_Time_Stamp\"] = transformTimeStamp(Data_Initial_Time_Stamp_T);\r\n\tj[\"Data_Final_Time_Stamp\"] = transformTimeStamp(Data_Final_Time_Stamp_T);\r\n\tj[\"Data_Service_Time_Stamp\"] = transformTimeStamp(Data_Service_Time_Stamp_T);\r\n\r\n\t//Preparar formato para broker MQTT\r\n\tstd::string machineId;\r\n\tstd::string totalPayload;\r\n\r\n\tmachineId = std::to_string(str_in.Id_Machine_Reference);\r\n\ttotalPayload = \"Id_Machine_Reference=\" + std::to_string(str_in.Id_Machine_Reference);\r\n\ttotalPayload = totalPayload + \"&Id_Order_Reference=\" + std::to_string(str_in.Id_Order_Reference);\r\n\ttotalPayload = totalPayload + \"&Id_Batch_Reference=\" + std::to_string(str_in.Id_Batch_Reference);\r\n\ttotalPayload = totalPayload + \"&Id_Ref_Subproduct_Type=\" + std::to_string(str_in.Id_Ref_Subproduct_Type);\r\n\ttotalPayload = totalPayload + \"&Id_Ref_Service_Type=\" + std::to_string(str_in.Id_Ref_Service_Type);\r\n\ttotalPayload = totalPayload + \"&Id_Item_Number=\" + std::to_string(str_in.Id_Item_Number);\r\n\ttotalPayload = totalPayload + \"&Data_Initial_Time_Stamp=\" + transformTimeStamp(Data_Initial_Time_Stamp_T);\r\n\ttotalPayload = totalPayload + \"&Data_Final_Time_Stamp=\" + transformTimeStamp(Data_Final_Time_Stamp_T);\r\n\r\n\tif (flags.Control_Flag_Service_Completed == true) {\r\n\t\ttotalPayload = totalPayload + \"&Data_Service_Time_Stamp=\" + transformTimeStamp(Data_Service_Time_Stamp_T);\r\n\t}\r\n\r\n\t// Nos conectamos al broker\r\n\tconnectWithBroker();\r\n\r\n\t// Una vez añadidos todos los datos, los subiremos al broker via MQTT\r\n\tchar* charPayload = (char*)totalPayload.c_str();\r\n\tchar* charMachineId = (char*)machineId.c_str();\r\n\r\n\tpublishData(charMachineId, charPayload);\r\n\r\n\tstd::string msgJson = j.dump(); //json serialized in c++ string data type\r\n\tjstring msg = env->NewStringUTF(msgJson.c_str());\t//Type conversion using UTF-8 string -> jstring\r\n\tenv->CallStaticIntMethod(cls, JNI_send, msg);\t//The send function is executed through JNI\r\n\r\n\treturn ODK_SUCCESS;\r\n}\r\n\r\n//Generates a String in JSON format with the message receipt confirmation\r\nODK_RESULT sendConf() {\r\n\tjson j;\t\t\t\t\t\t\t//JSON Object\r\n\tj[\"Received\"] = true;\t\t\t//The \"Received\" key is added to the object\r\n\tchar JsonCa[256 + 1] = { 0 };\t\t//An array is generated to reserve that memory\r\n\tchar* JsonC = JsonCa;\t\t\t//A pointer is created that points to the created array\r\n\tsprintf(JsonC, \"%s\", (j.dump()).c_str());\t//Serialized->String->const char*\r\n\tjstring msg = env->NewStringUTF(JsonC);\t//Type conversion char* -> jstring\r\n\tenv->CallStaticIntMethod(cls, JNI_send, msg);\t//The send function is executed through JNI\r\n\treturn ODK_SUCCESS;\r\n}\r\n\r\n\r\nbool JNIinit(void) {\r\n\r\n\t//The javaVM parameters are assigned and initialized\r\n\r\n\tJavaVMOption options[1];\r\n\tJavaVMInitArgs vm_args;\r\n\toptions[0].optionString = \"-Djava.class.path=C:\\\\Users\\\\Operator\\\\Documents\\\\FlexManSys\\\\classes;C:\\\\Users\\\\Operator\\\\Documents\\\\java\\\\libraries\\\\jade\\\\lib\\\\jade.jar;C:\\\\Users\\\\Operator\\\\Documents\\\\Java\\\\libraries\\\\gson\\\\gson-2.8.6.jar;C:\\\\Users\\\\Operator\\\\Documents\\\\Java\\\\libraries\\\\commons collections\\\\commons-collections4-4.4.jar\";\r\n\tmemset(&vm_args, 0, sizeof(vm_args));\r\n\tvm_args.version = JNI_VERSION_1_6;\r\n\tvm_args.nOptions = 1;\r\n\tvm_args.options = options;\r\n\tlong status = JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args);\r\n\tif (status == JNI_ERR) {\r\n\t\treturn false;\r\n\t}\r\n\t//The class that contains the necessary functions is searched for\r\n\tcls = env->FindClass(\"es/ehu/domain/manufacturing/agents/cognitive/ExternalJADEgw\");\r\n\tif (cls == NULL) {\r\n\t\treturn false;\r\n\t}\r\n\t//The static agentInit method is searched inside the class\r\n\tJNI_init = env->GetStaticMethodID(cls, \"agentInit\", \"(Ljava/lang/String;)V\");\t\t//javap -s -p <clase>\r\n\tif (JNI_init == 0) {\r\n\t\treturn false;\r\n\t}\r\n\t//The static send method is searched inside the class\r\n\tJNI_send = env->GetStaticMethodID(cls, \"send\", \"(Ljava/lang/String;)V\");\t\t//javap -s -p <clase>\r\n\tif (JNI_send == 0) {\r\n\t\treturn false;\r\n\t}\r\n\t//The recv send method is searched inside the class\r\n\tJNI_recv = env->GetStaticMethodID(cls, \"recv\", \"()Ljava/lang/String;\");\t\t//javap -s -p <clase>\r\n\tif (JNI_recv == 0) {\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/ODK_AgentPLC_Real.cpp b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/ODK_AgentPLC_Real.cpp
--- a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/ODK_AgentPLC_Real.cpp	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/ODK_AgentPLC_Real.cpp	(date 1617013340108)
@@ -18,36 +18,26 @@
 
 
 /*
- * OnLoad() is invoked after the application binary was loaded.
- * @return ODK_SUCCESS       notify, that no error occurs
- *                            - OnRun() will be invoked automatically
- *         any other value   notify, that an error occurs (user defined)
- *                            - OnUnload() will be invoked automatically
- *                            - ODK application will be unloaded automatically
- */
+* OnLoad() is invoked after the application binary was loaded.
+* @return ODK_SUCCESS       notify, that no error occurs
+*                            - OnRun() will be invoked automatically
+*         any other value   notify, that an error occurs (user defined)
+*                            - OnUnload() will be invoked automatically
+*                            - ODK application will be unloaded automatically
+*/
 EXPORT_API ODK_RESULT OnLoad(void)
 {
-	/*Aquí creo un fichero para debuguear*/
-	std::ofstream debugFile;
-
-	/*Aquí indico la ruta del fichero de debuguear*/
-	debugFile.open("C:\\Users\\aabadia004\\Documents\\debugFile.txt", std::ios_base::app);
-
-	/*Aquí escribo que la carga se ha completado*/
-	debugFile << "Loading process completed.";
-	/*Aquí cierro el fichero de debugueo*/
-	debugFile.close();
-
+	// place your code here
 	return ODK_SUCCESS;
 }
 
 /*
- * OnUnload() is invoked before the application binary is unloaded or when
- *            ODK-Host terminates.
- * @return ODK_SUCCESS       notify, that no error occurs
- *         any other value   notify, that an error occurs (user defined)
- *                            - ODK application will be unloaded anyway
- */
+* OnUnload() is invoked before the application binary is unloaded or when
+*            ODK-Host terminates.
+* @return ODK_SUCCESS       notify, that no error occurs
+*         any other value   notify, that an error occurs (user defined)
+*                            - ODK application will be unloaded anyway
+*/
 EXPORT_API ODK_RESULT OnUnload(void)
 {
 	// place your code here
@@ -55,10 +45,10 @@
 }
 
 /*
- * OnRun() is invoked when the CPU transitions to the RUN state and
- *         after OnLoad().
- * @return Does not affect the load operation or state transition.
- */
+* OnRun() is invoked when the CPU transitions to the RUN state and
+*         after OnLoad().
+* @return Does not affect the load operation or state transition.
+*/
 EXPORT_API ODK_RESULT OnRun(void)
 {
 	// place your code here
@@ -66,10 +56,10 @@
 }
 
 /*
- * OnStop() is invoked when the CPU transitions to the STOP/SHUTDOWN state
- *          or before unloading the ODK application.
- * @return Does not affect the load operation or state transition.
- */
+* OnStop() is invoked when the CPU transitions to the STOP/SHUTDOWN state
+*          or before unloading the ODK application.
+* @return Does not affect the load operation or state transition.
+*/
 EXPORT_API ODK_RESULT OnStop(void)
 {
 	// place your code here
@@ -114,7 +104,6 @@
 		days_remainder = 1 + ((days - ((days / 365) / 4)) % 365);
 	}
 
-
 	/*Sexto, comprobamos si el año es bisiesto, y en funcion de eso se fijan el día y el mes*/
 	int months = 0;
 	if ((years % 4 == 0 && years % 100 != 0) || years % 400 == 0)
@@ -251,11 +240,10 @@
 	value = std::to_string(years); value += "/"; value += std::to_string(months); value += "/"; value += std::to_string(days_remainder); value += " "; value += std::to_string(hours_remainder); value += ":"; value += std::to_string(minutes_remainder); value += ":"; value += std::to_string(seconds_remainder);
 	return value;
 }
-
 void connectWithBroker() {
 
-	/*Aquí creamos la conexión con el broker MQTT*/
-	char SERVER_ADDRESS[256] = "192.168.2.240:30036";
+	//Aquí creamos la conexión con el broker MQTT//
+	char SERVER_ADDRESS[256] = "192.168.2.240:1883";
 	char CLIENT_ID[256] = "odk_1";
 	char TOPIC[256] = "1";
 
@@ -271,7 +259,7 @@
 	}
 	//debugFile << "\n Connection successful!";
 
-	/*Aquí cierro el fichero de debugueo*/
+	//Aquí cierro el fichero de debugueo//
 	//debugFile.close();
 }
 
@@ -292,125 +280,92 @@
 ODK_RESULT initAgent() {
 	static bool uniqueStart = false;	//Variable to avoid multiple initializations
 	if (!uniqueStart) {				//It only happens on the first run
-		/*Aquí creo un fichero para debuguear*/
-		std::ofstream debugFile;
-
-		/*Aquí indico la ruta del fichero de debuguear*/
-		debugFile.open("C:\\Users\\aabadia004\\Documents\\debugFile.txt", std::ios_base::app);
-		/*Aquí escribo que la carga se ha completado*/
-		debugFile << "Initializing Gateway Agent";
 		uniqueStart = true;			//Update the flag to prevent it from being run again
 		if (!JNIinit())	return ODK_USER_ERROR_BASE;
 		jstring machineID = env->NewStringUTF("1");	//Se inicializa como agente gateway para la maquina 1
 		env->CallStaticIntMethod(cls, JNI_init, machineID);	//Executes the init method using JNI
-		env->CallStaticObjectMethod(cls, JNI_recv);		//Executes de recv method to initialize the gateway agent in JADE´s GUI
-		debugFile.close();
 	}
 	return ODK_SUCCESS;
 }
 
 //Parses a String in JSON format and leave its data in a structure
-ODK_RESULT SampleRead(/*OUT*/agent2plc& str_out, /*OUT*/ODK_BOOL& tRecv, /*OUT*/ODK_BOOL& tData, /*INOUT*/control_flags& flags) {
-	
-	/*Aquí modifico un fichero para debuguear*/
-	std::ofstream debugFile;
-
-	/*Aquí indico la ruta del fichero de debuguear*/
-	debugFile.open("C:\\Users\\aabadia004\\Documents\\debugFile.txt", std::ios_base::app);
-
-	/*Aquí escribo que la carga se ha completado*/
-	debugFile << "\n ->ODK recvAgent";
-
-	if (!flags.Control_Flag_New_Service) {
-
+ODK_RESULT recvAgent(/*OUT*/agent2plc& str2,	/*OUT*/ODK_BOOL& tRecv, /*OUT*/ODK_BOOL& tData, /*INOUT*/control_flags& str1) {
 	char msgInCa[254] = { 0 };		//An array is created to reserve that memory
 	const char* msgInC = msgInCa;	//Pointer to array of characters is created
-	//Executes the recv method through JNI and receives a jstring with the message to read
-	debugFile << "\n Looking for new message.";
+									//Executes the recv method through JNI and receives a jstring with the message to read
 	jstring s = (jstring)env->CallStaticObjectMethod(cls, JNI_recv);
 	msgInC = env->GetStringUTFChars(s, 0);					//Type conversion jstring->char*
-	debugFile << "\n Received message:";
-	debugFile << msgInC;
 
 	uint16_t ret;							//Variable to store the result of the function
 	tRecv = false;
 	tData = false;
-	debugFile << "\n Parsing JSON to structure";
 	json j = json::parse(msgInC);			//The String is parsed and converted to a JSON object
-	debugFile << "\n Estructure obtained";
 	if (j.contains("Received")) {			//It is checked if it is a receipt confirmation
-		debugFile << "\n Received confirmation message.";
 		if (j["Received"] == true) {
 			tRecv = true;
 			ret = ODK_SUCCESS;
 		}
 	}
 	else if (j.contains("Control_Flag_New_Service")) {	//At least the first field is checked
-		debugFile << "\n Receiving new operation.";
 		tData = true;
 		//The received parameters are copied to the output structure		
-		flags.Control_Flag_New_Service = j["Control_Flag_New_Service"].get<bool>();
-		str_out.Id_Machine_Reference = j["Id_Machine_Reference"].get<int>();
-		str_out.Id_Order_Reference = j["Id_Order_Reference"].get<int>();
-		str_out.Id_Batch_Reference = j["Id_Batch_Reference"].get<int>();
-		str_out.Id_Ref_Subproduct_Type = j["Id_Ref_Subproduct_Type"].get<int>();
-		str_out.Operation_Ref_Service_Type = j["Operation_Ref_Service_Type"].get<int>();
-		str_out.Operation_No_of_Items = j["Operation_No_of_Items"].get<int>();
+		str1.Control_Flag_New_Service = j["Control_Flag_New_Service"].get<bool>();
+		str2.Id_Machine_Reference = j["Id_Machine_Reference"].get<int>();
+		str2.Id_Order_Reference = j["Id_Order_Reference"].get<int>();
+		str2.Id_Batch_Reference = j["Id_Batch_Reference"].get<int>();
+		str2.Id_Ref_Subproduct_Type = j["Id_Ref_Subproduct_Type"].get<int>();
+		str2.Operation_Ref_Service_Type = j["Operation_Ref_Service_Type"].get<int>();
+		str2.Operation_No_of_Items = j["Operation_No_of_Items"].get<int>();
 
 		ret = ODK_SUCCESS;
 	}
-	else {
-		debugFile << "\n No message has been received.";
-		ret = ODK_SUCCESS;
-	}
-	debugFile.close();
+
 	return ret;
-
-	}
 }
 
 //From a data structure a String is generated in JSON format
-ODK_RESULT SampleWrite(/*IN*/const control_flags& flags, /*IN*/const plc2agent& str_in) {
+ODK_RESULT sendAgent(/*IN*/const control_flags& str1, /*IN*/const plc2agent& str2) {
 	json j;	//JSON Object
-	//Each element of the structure is copied into a Json object
-	j["Control_Flag_Item_Completed"] = (bool)flags.Control_Flag_Item_Completed;
-	j["Control_Flag_Service_Completed"] = (bool)flags.Control_Flag_Service_Completed;
-	j["Id_Machine_Reference"] = (uint32_t)str_in.Id_Machine_Reference;
-	j["Id_Order_Reference"] = (uint32_t)str_in.Id_Order_Reference;
-	j["Id_Batch_Reference"] = (uint32_t)str_in.Id_Batch_Reference;
-	j["Id_Ref_Subproduct_Type"] = (uint32_t)str_in.Id_Ref_Subproduct_Type;
-	j["Id_Ref_Service_Type"] = (uint32_t)str_in.Id_Ref_Service_Type;
-	j["Id_Item_Number"] = (uint8_t)str_in.Id_Item_Number;
+			//Each element of the structure is copied into a Json object
+	j["Control_Flag_Item_Completed"] = (bool)str1.Control_Flag_Item_Completed;
+	j["Control_Flag_Service_Completed"] = (bool)str1.Control_Flag_Service_Completed;
+	j["Id_Machine_Reference"] = (uint32_t)str2.Id_Machine_Reference;
+	j["Id_Order_Reference"] = (uint32_t)str2.Id_Order_Reference;
+	j["Id_Batch_Reference"] = (uint32_t)str2.Id_Batch_Reference;
+	j["Id_Ref_Subproduct_Type"] = (uint32_t)str2.Id_Ref_Subproduct_Type;
+	j["Id_Ref_Service_Type"] = (uint32_t)str2.Id_Ref_Service_Type;
+	j["Id_Item_Number"] = (uint8_t)str2.Id_Item_Number;
 
-	unsigned long long Data_Initial_Time_Stamp_T = str_in.Data_Initial_Time_Stamp;
-	unsigned long long Data_Final_Time_Stamp_T = str_in.Data_Final_Time_Stamp;
-	unsigned long long Data_Service_Time_Stamp_T = str_in.Data_Service_Time_Stamp;
+	unsigned long long Data_Initial_Time_Stamp_T = str2.Data_Initial_Time_Stamp;
+	unsigned long long Data_Final_Time_Stamp_T = str2.Data_Final_Time_Stamp;
+	unsigned long long Data_Service_Time_Stamp_T = str2.Data_Service_Time_Stamp;
 
 	j["Data_Initial_Time_Stamp"] = transformTimeStamp(Data_Initial_Time_Stamp_T);
 	j["Data_Final_Time_Stamp"] = transformTimeStamp(Data_Final_Time_Stamp_T);
 	j["Data_Service_Time_Stamp"] = transformTimeStamp(Data_Service_Time_Stamp_T);
 
+	// Nos conectamos al broker
+	connectWithBroker();
+
 	//Preparar formato para broker MQTT
 	std::string machineId;
 	std::string totalPayload;
 
-	machineId = std::to_string(str_in.Id_Machine_Reference);
-	totalPayload = "Id_Machine_Reference=" + std::to_string(str_in.Id_Machine_Reference);
-	totalPayload = totalPayload + "&Id_Order_Reference=" + std::to_string(str_in.Id_Order_Reference);
-	totalPayload = totalPayload + "&Id_Batch_Reference=" + std::to_string(str_in.Id_Batch_Reference);
-	totalPayload = totalPayload + "&Id_Ref_Subproduct_Type=" + std::to_string(str_in.Id_Ref_Subproduct_Type);
-	totalPayload = totalPayload + "&Id_Ref_Service_Type=" + std::to_string(str_in.Id_Ref_Service_Type);
-	totalPayload = totalPayload + "&Id_Item_Number=" + std::to_string(str_in.Id_Item_Number);
+
+	machineId = std::to_string(str2.Id_Machine_Reference);
+	totalPayload = "Id_Machine_Reference=" + std::to_string(str2.Id_Machine_Reference);
+	totalPayload = totalPayload + "&Id_Order_Reference=" + std::to_string(str2.Id_Order_Reference);
+	totalPayload = totalPayload + "&Id_Batch_Reference=" + std::to_string(str2.Id_Batch_Reference);
+	totalPayload = totalPayload + "&Id_Ref_Subproduct_Type=" + std::to_string(str2.Id_Ref_Subproduct_Type);
+	totalPayload = totalPayload + "&Id_Ref_Service_Type=" + std::to_string(str2.Id_Ref_Service_Type);
+	totalPayload = totalPayload + "&Id_Item_Number=" + std::to_string(str2.Id_Item_Number);
 	totalPayload = totalPayload + "&Data_Initial_Time_Stamp=" + transformTimeStamp(Data_Initial_Time_Stamp_T);
 	totalPayload = totalPayload + "&Data_Final_Time_Stamp=" + transformTimeStamp(Data_Final_Time_Stamp_T);
 
-	if (flags.Control_Flag_Service_Completed == true) {
+	if (str1.Control_Flag_Service_Completed == true) {
 		totalPayload = totalPayload + "&Data_Service_Time_Stamp=" + transformTimeStamp(Data_Service_Time_Stamp_T);
 	}
 
-	// Nos conectamos al broker
-	connectWithBroker();
-
 	// Una vez añadidos todos los datos, los subiremos al broker via MQTT
 	char* charPayload = (char*)totalPayload.c_str();
 	char* charMachineId = (char*)machineId.c_str();
@@ -443,34 +398,43 @@
 
 	JavaVMOption options[1];
 	JavaVMInitArgs vm_args;
-	options[0].optionString = "-Djava.class.path=C:\\Users\\Operator\\Documents\\FlexManSys\\classes;C:\\Users\\Operator\\Documents\\java\\libraries\\jade\\lib\\jade.jar;C:\\Users\\Operator\\Documents\\Java\\libraries\\gson\\gson-2.8.6.jar;C:\\Users\\Operator\\Documents\\Java\\libraries\\commons collections\\commons-collections4-4.4.jar";
+	options[0].optionString = "-Djava.class.path=C:\\Users\\Operator2\\Documents\\FlexManSys\\classes;C:\\Users\\Operator2\\Documents\\java\\libraries\\jade\\lib\\jade.jar;C:\\Users\\Operator2\\Documents\\java\\libraries\\gson\\gson-2.8.6.jar;C:\\Users\\Operator2\\Documents\\java\\libraries\\commons collections\\commons-collections4-4.4.jar";
 	memset(&vm_args, 0, sizeof(vm_args));
 	vm_args.version = JNI_VERSION_1_6;
 	vm_args.nOptions = 1;
 	vm_args.options = options;
+	std::ofstream debugFile;
+	debugFile.open("C:\\Users\\Operator2\\Documents\\debugFile.txt", std::ios_base::app);
 	long status = JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args);
 	if (status == JNI_ERR) {
+		debugFile << "\r\n JNIinit status error.";
 		return false;
 	}
 	//The class that contains the necessary functions is searched for
 	cls = env->FindClass("es/ehu/domain/manufacturing/agents/cognitive/ExternalJADEgw");
 	if (cls == NULL) {
+		debugFile << "\r\n JNIinit findClass error.";
 		return false;
 	}
 	//The static agentInit method is searched inside the class
 	JNI_init = env->GetStaticMethodID(cls, "agentInit", "(Ljava/lang/String;)V");		//javap -s -p <clase>
 	if (JNI_init == 0) {
+		debugFile << "\r\n JNIinit agentInit error.";
 		return false;
 	}
 	//The static send method is searched inside the class
 	JNI_send = env->GetStaticMethodID(cls, "send", "(Ljava/lang/String;)V");		//javap -s -p <clase>
 	if (JNI_send == 0) {
+		//debugFile << "\r\n JNIinit send error.";
 		return false;
 	}
 	//The recv send method is searched inside the class
 	JNI_recv = env->GetStaticMethodID(cls, "recv", "()Ljava/lang/String;");		//javap -s -p <clase>
 	if (JNI_recv == 0) {
+		//debugFile << "\r\n JNIinit recv error.";
 		return false;
 	}
+	debugFile.close();
 	return true;
 }
+
Index: 1_sa.cmd
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>java -Dlog4j.configurationFile=\"log4j2.xml\" -cp \".\\lib\\jade;.\\lib\\log4j\\log4j-api-2.3.jar;.\\lib\\log4j\\log4j-core-2.3.jar;.\\lib\\commons\\commons-codec-1.3.jar;.\\lib\\commons\\commons-io-2.6.jar;.\\classes\" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.250 -port 1099 -local-port 1099 sa:es.ehu.SystemModelAgent
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/1_sa.cmd b/1_sa.cmd
--- a/1_sa.cmd	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/1_sa.cmd	(date 1617013719378)
@@ -1,1 +1,1 @@
-java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar;.\lib\commons\commons-codec-1.3.jar;.\lib\commons\commons-io-2.6.jar;.\classes" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.250 -port 1099 -local-port 1099 sa:es.ehu.SystemModelAgent
\ No newline at end of file
+java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar;.\lib\commons\commons-codec-1.3.jar;.\lib\commons\commons-io-2.6.jar;.\classes" jade.Boot -container -host 192.168.2.17 -local-host 192.168.2.17 -port 1099 -local-port 1099 sa:es.ehu.SystemModelAgent
\ No newline at end of file
Index: odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.Build.CppClean.log
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>c:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agentplc_real.pch\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\vc142.pdb\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\stdafx.obj\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_stringhelper.obj\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_cpureadwritedata.obj\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_cpureaddata.obj\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agentplc_real.obj\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\dllmain.obj\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_execution.obj\r\nc:\\compartida_u107490\\odk_agentplc_real\\release\\odk_agentplc_real.ilk\r\nc:\\compartida_u107490\\odk_agentplc_real\\release\\odk_agentplc_real.dll\r\nc:\\compartida_u107490\\odk_agentplc_real\\release\\odk_agentplc_real.pdb\r\nc:\\compartida_u107490\\odk_agentplc_real\\release\\odk_agentplc_real.lib\r\nc:\\compartida_u107490\\odk_agentplc_real\\release\\odk_agentplc_real.exp\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agentplc_real.res\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\cl.command.1.tlog\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\cl.read.1.tlog\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\cl.write.1.tlog\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\link.command.1.tlog\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\link.read.1.tlog\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\link.write.1.tlog\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\odk_agentplc_real.write.1u.tlog\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\rc.command.1.tlog\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\rc.read.1.tlog\r\nc:\\compartida_u107490\\odk_agentplc_real\\odk_agentplc_real\\release\\odk_agen.2f56c596.tlog\\rc.write.1.tlog\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.Build.CppClean.log b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.Build.CppClean.log
--- a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.Build.CppClean.log	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.Build.CppClean.log	(date 1617013340139)
@@ -1,25 +1,25 @@
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agentplc_real.pch
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\vc142.pdb
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\stdafx.obj
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_stringhelper.obj
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_cpureadwritedata.obj
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_cpureaddata.obj
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agentplc_real.obj
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\dllmain.obj
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_execution.obj
-c:\compartida_u107490\odk_agentplc_real\release\odk_agentplc_real.ilk
-c:\compartida_u107490\odk_agentplc_real\release\odk_agentplc_real.dll
-c:\compartida_u107490\odk_agentplc_real\release\odk_agentplc_real.pdb
-c:\compartida_u107490\odk_agentplc_real\release\odk_agentplc_real.lib
-c:\compartida_u107490\odk_agentplc_real\release\odk_agentplc_real.exp
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agentplc_real.res
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\cl.command.1.tlog
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\cl.read.1.tlog
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\cl.write.1.tlog
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\link.command.1.tlog
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\link.read.1.tlog
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\link.write.1.tlog
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\odk_agentplc_real.write.1u.tlog
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\rc.command.1.tlog
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\rc.read.1.tlog
-c:\compartida_u107490\odk_agentplc_real\odk_agentplc_real\release\odk_agen.2f56c596.tlog\rc.write.1.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agentplc_real.pch
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\vc140.pdb
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\stdafx.obj
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_stringhelper.obj
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_cpureadwritedata.obj
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_cpureaddata.obj
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agentplc_real.obj
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\dllmain.obj
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_execution.obj
+c:\users\admin\desktop\odk_agentplc_real\release\odk_agentplc_real.ilk
+c:\users\admin\desktop\odk_agentplc_real\release\odk_agentplc_real.dll
+c:\users\admin\desktop\odk_agentplc_real\release\odk_agentplc_real.pdb
+c:\users\admin\desktop\odk_agentplc_real\release\odk_agentplc_real.lib
+c:\users\admin\desktop\odk_agentplc_real\release\odk_agentplc_real.exp
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agentplc_real.res
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\cl.command.1.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\cl.read.1.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\cl.write.1.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\link.command.1.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\link.read.1.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\link.write.1.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\odk_agentplc_real.write.1u.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\rc.command.1.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\rc.read.1.tlog
+c:\users\admin\desktop\odk_agentplc_real\odk_agentplc_real\release\odk_agen.278d0d4a.tlog\rc.write.1.tlog
Index: odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/STEP7/ODK_AgentPLC_Real.scl
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>FUNCTION_BLOCK \"ODK_AgentPLC_Real_Load\"\r\n{ S7_Optimized_Access := 'TRUE' }\r\nVERSION : 0.1\r\n//This block is AUTO GENERATED - DO NOT MODIFY this block!\r\n//Created by ODK_CodeGenerator version 2.5.1\r\n//at Mon March 15 10:24:55 2021\r\n//********************************************************\r\n  VAR_INPUT \r\n    REQ : Bool;\r\n  END_VAR\r\n  VAR_OUTPUT \r\n    DONE : Bool;\r\n    BUSY : Bool;\r\n    ERROR : Bool;\r\n    STATUS : Int;\r\n  END_VAR\r\n  VAR \r\n    ODK_Load_Instance {OriginalPartName := \r\n        'ODK_Load_SFB_2011'; LibVersion := '1.0'} : ODK_Load;\r\n    _odk_internal_LIBRARY_NAME : String := '<nrt>ODK_AgentPLC_Real.dll';\r\n  END_VAR\r\n  VAR CONSTANT \r\n    _odk_internal_INSTANCE_ID : UDInt := 1237418461;\r\n  END_VAR\r\nBEGIN\r\n  //\r\n  // DO NOT CHANGE BELOW OF THIS LINE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE !!\r\n  //\r\n  #ODK_Load_Instance (REQ:=#REQ,\r\n                      LIBRARY_NAME:=#_odk_internal_LIBRARY_NAME,\r\n                      INSTANCE_ID:=#_odk_internal_INSTANCE_ID,\r\n                      DONE=>#DONE,\r\n                      BUSY=>#BUSY,\r\n                      ERROR=>#ERROR,\r\n                      STATUS=>#STATUS);\r\n  //\r\n  // DO NOT CHANGE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE ABOVE OF THIS LINE !!\r\n  //\r\nEND_FUNCTION_BLOCK\r\n\r\nFUNCTION_BLOCK \"ODK_AgentPLC_Real_Unload\"\r\n{ S7_Optimized_Access := 'TRUE' }\r\nVERSION : 0.1\r\n//This block is AUTO GENERATED - DO NOT MODIFY this block!\r\n//Created by ODK_CodeGenerator version 205.100.101.18\r\n//at Mon March 15 10:24:55 2021\r\n//********************************************************\r\n  VAR_INPUT \r\n    REQ : Bool;\r\n  END_VAR\r\n  VAR_OUTPUT \r\n    DONE : Bool;\r\n    BUSY : Bool;\r\n    ERROR : Bool;\r\n    STATUS : Int;\r\n  END_VAR\r\n  VAR\r\n    ODK_Unld_Instance {OriginalPartName := \r\n         'ODK_Unld_SFB_2012'; LibVersion := '1.0'} : ODK_Unld;\r\n  END_VAR\r\n  VAR CONSTANT \r\n    _odk_internal_INSTANCE_ID : UDInt := 1237418461;\r\n  END_VAR\r\nBEGIN\r\n  //\r\n  // DO NOT CHANGE BELOW OF THIS LINE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE !!\r\n  //\r\n  #ODK_Unld_Instance (REQ:=#REQ,\r\n                      INSTANCE_ID:=#_odk_internal_INSTANCE_ID,\r\n                      DONE=>#DONE,\r\n                      BUSY=>#BUSY,\r\n                      ERROR=>#ERROR,\r\n                      STATUS=>#STATUS);    \r\n  //\r\n  // DO NOT CHANGE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE ABOVE OF THIS LINE !!\r\n  //\r\nEND_FUNCTION_BLOCK\r\n\r\nTYPE \"ODK_AgentPLC_Realcontrol_flags\"\r\nVERSION : 0.1\r\n//This block is AUTO GENERATED - DO NOT MODIFY this block!\r\n//Created by ODK_CodeGenerator version 205.100.101.18\r\n//at Mon March 15 10:24:55 2021\r\n//********************************************************\r\n  STRUCT\r\n    \"Control_Flag_New_Service\" : BOOL;\r\n    \"Control_Flag_Item_Completed\" : BOOL;\r\n    \"Control_Flag_Service_Completed\" : BOOL;\r\n  END_STRUCT;\r\nEND_TYPE\r\n\r\nTYPE \"ODK_AgentPLC_Realagent2plc\"\r\nVERSION : 0.1\r\n//This block is AUTO GENERATED - DO NOT MODIFY this block!\r\n//Created by ODK_CodeGenerator version 205.100.101.18\r\n//at Mon March 15 10:24:55 2021\r\n//********************************************************\r\n  STRUCT\r\n    \"Id_Machine_Reference\" : UDINT;\r\n    \"Id_Order_Reference\" : UDINT;\r\n    \"Id_Batch_Reference\" : UDINT;\r\n    \"Id_Ref_Subproduct_Type\" : UDINT;\r\n    \"Operation_Ref_Service_Type\" : UDINT;\r\n    \"Operation_No_of_Items\" : USINT;\r\n  END_STRUCT;\r\nEND_TYPE\r\n\r\nTYPE \"ODK_AgentPLC_Realplc2agent\"\r\nVERSION : 0.1\r\n//This block is AUTO GENERATED - DO NOT MODIFY this block!\r\n//Created by ODK_CodeGenerator version 205.100.101.18\r\n//at Mon March 15 10:24:55 2021\r\n//********************************************************\r\n  STRUCT\r\n    \"Id_Machine_Reference\" : UDINT;\r\n    \"Id_Order_Reference\" : UDINT;\r\n    \"Id_Batch_Reference\" : UDINT;\r\n    \"Id_Ref_Subproduct_Type\" : UDINT;\r\n    \"Id_Ref_Service_Type\" : UDINT;\r\n    \"Id_Item_Number\" : USINT;\r\n    \"Data_Initial_Time_Stamp\" : LDT;\r\n    \"Data_Final_Time_Stamp\" : LDT;\r\n    \"Data_Service_Time_Stamp\" : LDT;\r\n  END_STRUCT;\r\nEND_TYPE\r\n\r\nFUNCTION_BLOCK \"ODK_AgentPLC_RealinitAgent\"\r\n{ S7_Optimized_Access := 'TRUE' }\r\nVERSION : 0.1\r\n//This block is AUTO GENERATED - DO NOT MODIFY this block!\r\n//Created by  ODK_CodeGenerator version 205.100.101.18\r\n//at Mon March 15 10:24:55 2021\r\n//********************************************************\r\n  VAR_INPUT\r\n    REQ : Bool;\r\n\r\n  END_VAR\r\n  VAR_OUTPUT\r\n    ERROR : Bool := false;\r\n    DONE : Bool := false;\r\n    BUSY : Bool := false;\r\n    STATUS : INT := 0;\r\n\r\n  END_VAR\r\n  VAR\r\n    _odk_internal_Last_REQ : Bool := false;\r\n    _odk_internal_Last_BUSY : Bool := false;\r\n    ODK_ExcA_Instance {OriginalPartName :=\r\n            'ODK_ExcA_SFB_2013'; LibVersion := '1.0'} : ODK_ExcA;\r\n  END_VAR\r\n  VAR_TEMP \r\n    _odk_internal_pos : DInt;\r\n    _odk_internal_err : Int;\r\n    _odk_internal_i : Int;\r\n  END_VAR\r\n  VAR CONSTANT \r\n    _odk_internal_INSTANCE_ID : UDINT := 1237418461;\r\n    _odk_internal_COMMAND : UDINT := 4017992964;\r\n  END_VAR\r\nBEGIN\r\n  //\r\n  // DO NOT CHANGE BELOW OF THIS LINE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE !!\r\n  //\r\n  #_odk_internal_Last_REQ := #REQ;\t\r\n  #ODK_ExcA_Instance(REQ:=#REQ,\r\n                     INSTANCE_ID:=#_odk_internal_INSTANCE_ID,\r\n                     COMMAND:=#_odk_internal_COMMAND,\r\n                     IN_DATA:=null,\r\n                     INOUT_DATA:=null,\r\n                     OUT_DATA:=null,\r\n                     DONE=>#DONE,\r\n                     BUSY=>#BUSY,\r\n                     ERROR=>#ERROR,\r\n                     STATUS=>#STATUS);\r\n  #_odk_internal_Last_BUSY := #BUSY;\r\n  //\r\n  // DO NOT CHANGE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE ABOVE OF THIS LINE !!\r\n  //\r\nEND_FUNCTION_BLOCK\r\n\r\nFUNCTION_BLOCK \"ODK_AgentPLC_RealSampleWrite\"\r\n{ S7_Optimized_Access := 'TRUE' }\r\nVERSION : 0.1\r\n//This block is AUTO GENERATED - DO NOT MODIFY this block!\r\n//Created by  ODK_CodeGenerator version 205.100.101.18\r\n//at Mon March 15 10:24:55 2021\r\n//********************************************************\r\n//Agent Init\r\n  VAR_INPUT\r\n    REQ : Bool;\r\n    \"flags\" : \"ODK_AgentPLC_Realcontrol_flags\";\r\n    \"str_out\" : \"ODK_AgentPLC_Realplc2agent\"; //Sends the Agent message   \r\n  END_VAR\r\n  VAR_OUTPUT\r\n    ERROR : Bool := false;\r\n    DONE : Bool := false;\r\n    BUSY : Bool := false;\r\n    STATUS : INT := 0;\r\n\r\n  END_VAR\r\n  VAR\r\n    _odk_internal_Last_REQ : Bool := false;\r\n    _odk_internal_Last_BUSY : Bool := false;\r\n    ODK_ExcA_Instance {OriginalPartName :=\r\n            'ODK_ExcA_SFB_2013'; LibVersion := '1.0'} : ODK_ExcA;\r\n    _odk_internal_IN_BUFFER : Array [0..47] of Byte;\r\n  END_VAR\r\n  VAR_TEMP \r\n    _odk_internal_pos : DInt;\r\n    _odk_internal_err : Int;\r\n    _odk_internal_i : Int;\r\n  END_VAR\r\n  VAR CONSTANT \r\n    _odk_internal_INSTANCE_ID : UDINT := 1237418461;\r\n    _odk_internal_COMMAND : UDINT := 3163984009;\r\n  END_VAR\r\nBEGIN\r\n  //\r\n  // DO NOT CHANGE BELOW OF THIS LINE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE !!\r\n  //\r\n  //Agent Init\r\n  IF NOT #_odk_internal_Last_REQ & #REQ & NOT #_odk_internal_Last_BUSY THEN\r\n    #_odk_internal_pos := 0;\r\n    IF (True = #flags.#Control_Flag_New_Service) THEN\r\n      #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#1;\r\n    ELSE\r\n      #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#0;\r\n    END_IF;\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n    IF (True = #flags.#Control_Flag_Item_Completed) THEN\r\n      #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#1;\r\n    ELSE\r\n      #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#0;\r\n    END_IF;\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n    IF (True = #flags.#Control_Flag_Service_Completed) THEN\r\n      #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#1;\r\n    ELSE\r\n      #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#0;\r\n    END_IF;\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Machine_Reference, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Order_Reference, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Batch_Reference, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Ref_Subproduct_Type, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Ref_Service_Type, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);\r\n    _odk_internal_IN_BUFFER[#_odk_internal_pos] := USINT_TO_BYTE(#str_out.#Id_Item_Number);\r\n    #_odk_internal_pos  := #_odk_internal_pos +1;\r\n    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Data_Initial_Time_Stamp, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Data_Final_Time_Stamp, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Data_Service_Time_Stamp, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);\r\n    \r\n  END_IF;\r\n  #_odk_internal_Last_REQ := #REQ;\t\r\n  #ODK_ExcA_Instance(REQ:=#REQ,\r\n                     INSTANCE_ID:=#_odk_internal_INSTANCE_ID,\r\n                     COMMAND:=#_odk_internal_COMMAND,\r\n                     IN_DATA:=#_odk_internal_IN_BUFFER,\r\n                     INOUT_DATA:=null,\r\n                     OUT_DATA:=null,\r\n                     DONE=>#DONE,\r\n                     BUSY=>#BUSY,\r\n                     ERROR=>#ERROR,\r\n                     STATUS=>#STATUS);\r\n  #_odk_internal_Last_BUSY := #BUSY;\r\n  //\r\n  // DO NOT CHANGE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE ABOVE OF THIS LINE !!\r\n  //\r\nEND_FUNCTION_BLOCK\r\n\r\nFUNCTION_BLOCK \"ODK_AgentPLC_RealSampleRead\"\r\n{ S7_Optimized_Access := 'TRUE' }\r\nVERSION : 0.1\r\n//This block is AUTO GENERATED - DO NOT MODIFY this block!\r\n//Created by  ODK_CodeGenerator version 205.100.101.18\r\n//at Mon March 15 10:24:55 2021\r\n//********************************************************\r\n  VAR_INPUT\r\n    REQ : Bool;\r\n\r\n  END_VAR\r\n  VAR_OUTPUT\r\n    ERROR : Bool := false;\r\n    DONE : Bool := false;\r\n    BUSY : Bool := false;\r\n    STATUS : INT := 0;\r\n    \"str_in\" : \"ODK_AgentPLC_Realagent2plc\";\r\n    \"tRecv\" : BOOL;\r\n    \"tData\" : BOOL;\r\n  END_VAR\r\n  VAR_IN_OUT\r\n    \"flags\" : \"ODK_AgentPLC_Realcontrol_flags\"; //Receive the Agent message and parses the JSON to structure\r\n  END_VAR\r\n  VAR\r\n    _odk_internal_Last_REQ : Bool := false;\r\n    _odk_internal_Last_BUSY : Bool := false;\r\n    ODK_ExcA_Instance {OriginalPartName :=\r\n            'ODK_ExcA_SFB_2013'; LibVersion := '1.0'} : ODK_ExcA;\r\n    _odk_internal_INOUT_BUFFER : Array [0..2] of Byte;\r\n    _odk_internal_OUT_BUFFER : Array [0..22] of Byte;\r\n  END_VAR\r\n  VAR_TEMP \r\n    _odk_internal_pos : DInt;\r\n    _odk_internal_err : Int;\r\n    _odk_internal_i : Int;\r\n  END_VAR\r\n  VAR CONSTANT \r\n    _odk_internal_INSTANCE_ID : UDINT := 1237418461;\r\n    _odk_internal_COMMAND : UDINT := 185329515;\r\n  END_VAR\r\nBEGIN\r\n  //\r\n  // DO NOT CHANGE BELOW OF THIS LINE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE !!\r\n  //\r\n  IF NOT #_odk_internal_Last_REQ & #REQ & NOT #_odk_internal_Last_BUSY THEN\r\n\r\n    #_odk_internal_pos := 0;\r\n    IF (True = #flags.#Control_Flag_New_Service) THEN\r\n      #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#1;\r\n    ELSE\r\n      #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#0;\r\n    END_IF;\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n    IF (True = #flags.#Control_Flag_Item_Completed) THEN\r\n      #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#1;\r\n    ELSE\r\n      #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#0;\r\n    END_IF;\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n    IF (True = #flags.#Control_Flag_Service_Completed) THEN\r\n      #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#1;\r\n    ELSE\r\n      #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#0;\r\n    END_IF;\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;    \r\n  END_IF;\r\n  #_odk_internal_Last_REQ := #REQ;\t\r\n  #ODK_ExcA_Instance(REQ:=#REQ,\r\n                     INSTANCE_ID:=#_odk_internal_INSTANCE_ID,\r\n                     COMMAND:=#_odk_internal_COMMAND,\r\n                     IN_DATA:=null,\r\n                     INOUT_DATA:=#_odk_internal_INOUT_BUFFER,\r\n                     OUT_DATA:=#_odk_internal_OUT_BUFFER,\r\n                     DONE=>#DONE,\r\n                     BUSY=>#BUSY,\r\n                     ERROR=>#ERROR,\r\n                     STATUS=>#STATUS);\r\n  IF NOT #BUSY & #_odk_internal_Last_BUSY & NOT #ERROR THEN\r\n    #_odk_internal_pos := 0;\r\n    #flags.#Control_Flag_New_Service := BYTE_TO_BOOL(#_odk_internal_INOUT_BUFFER[#_odk_internal_pos]);\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n    #flags.#Control_Flag_Item_Completed := BYTE_TO_BOOL(#_odk_internal_INOUT_BUFFER[#_odk_internal_pos]);\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n    #flags.#Control_Flag_Service_Completed := BYTE_TO_BOOL(#_odk_internal_INOUT_BUFFER[#_odk_internal_pos]);\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n    #_odk_internal_pos := 0;\r\n    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Id_Machine_Reference, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Id_Order_Reference, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Id_Batch_Reference, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Id_Ref_Subproduct_Type, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);\r\n    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Operation_Ref_Service_Type, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);\r\n    #str_in.#Operation_No_of_Items := BYTE_TO_USINT(_odk_internal_OUT_BUFFER[#_odk_internal_pos]);\r\n    #_odk_internal_pos  := #_odk_internal_pos +1;\r\n    #tRecv := BYTE_TO_BOOL(#_odk_internal_OUT_BUFFER[#_odk_internal_pos]);\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n    #tData := BYTE_TO_BOOL(#_odk_internal_OUT_BUFFER[#_odk_internal_pos]);\r\n    #_odk_internal_pos  := #_odk_internal_pos + 1;\r\n  END_IF;\r\n  #_odk_internal_Last_BUSY := #BUSY;\r\n  //\r\n  // DO NOT CHANGE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE ABOVE OF THIS LINE !!\r\n  //\r\nEND_FUNCTION_BLOCK\r\n\r\nFUNCTION_BLOCK \"ODK_AgentPLC_RealsendConf\"\r\n{ S7_Optimized_Access := 'TRUE' }\r\nVERSION : 0.1\r\n//This block is AUTO GENERATED - DO NOT MODIFY this block!\r\n//Created by  ODK_CodeGenerator version 205.100.101.18\r\n//at Mon March 15 10:24:55 2021\r\n//********************************************************\r\n  VAR_INPUT\r\n    REQ : Bool;\r\n\r\n  END_VAR\r\n  VAR_OUTPUT\r\n    ERROR : Bool := false;\r\n    DONE : Bool := false;\r\n    BUSY : Bool := false;\r\n    STATUS : INT := 0;\r\n\r\n  END_VAR\r\n  VAR\r\n    _odk_internal_Last_REQ : Bool := false;\r\n    _odk_internal_Last_BUSY : Bool := false;\r\n    ODK_ExcA_Instance {OriginalPartName :=\r\n            'ODK_ExcA_SFB_2013'; LibVersion := '1.0'} : ODK_ExcA;\r\n  END_VAR\r\n  VAR_TEMP \r\n    _odk_internal_pos : DInt;\r\n    _odk_internal_err : Int;\r\n    _odk_internal_i : Int;\r\n  END_VAR\r\n  VAR CONSTANT \r\n    _odk_internal_INSTANCE_ID : UDINT := 1237418461;\r\n    _odk_internal_COMMAND : UDINT := 704312951;\r\n  END_VAR\r\nBEGIN\r\n  //\r\n  // DO NOT CHANGE BELOW OF THIS LINE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE !!\r\n  //\r\n  #_odk_internal_Last_REQ := #REQ;\t\r\n  #ODK_ExcA_Instance(REQ:=#REQ,\r\n                     INSTANCE_ID:=#_odk_internal_INSTANCE_ID,\r\n                     COMMAND:=#_odk_internal_COMMAND,\r\n                     IN_DATA:=null,\r\n                     INOUT_DATA:=null,\r\n                     OUT_DATA:=null,\r\n                     DONE=>#DONE,\r\n                     BUSY=>#BUSY,\r\n                     ERROR=>#ERROR,\r\n                     STATUS=>#STATUS);\r\n  #_odk_internal_Last_BUSY := #BUSY;\r\n  //\r\n  // DO NOT CHANGE !!\r\n  // This is an automatic generated block by the\r\n  // SIMATIC ODK 1500S V2.5.1\r\n  // DO NOT CHANGE ABOVE OF THIS LINE !!\r\n  //\r\nEND_FUNCTION_BLOCK\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/STEP7/ODK_AgentPLC_Real.scl b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/STEP7/ODK_AgentPLC_Real.scl
--- a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/STEP7/ODK_AgentPLC_Real.scl	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/STEP7/ODK_AgentPLC_Real.scl	(date 1617013340170)
@@ -2,8 +2,8 @@
 { S7_Optimized_Access := 'TRUE' }
 VERSION : 0.1
 //This block is AUTO GENERATED - DO NOT MODIFY this block!
-//Created by ODK_CodeGenerator version 2.5.1
-//at Mon March 15 10:24:55 2021
+//Created by ODK_CodeGenerator version 200.0.3002.1
+//at lun marzo 29 11:33:17 2021
 //********************************************************
   VAR_INPUT 
     REQ : Bool;
@@ -20,13 +20,13 @@
     _odk_internal_LIBRARY_NAME : String := '<nrt>ODK_AgentPLC_Real.dll';
   END_VAR
   VAR CONSTANT 
-    _odk_internal_INSTANCE_ID : UDInt := 1237418461;
+    _odk_internal_INSTANCE_ID : UDInt := 4141663351;
   END_VAR
 BEGIN
   //
   // DO NOT CHANGE BELOW OF THIS LINE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE !!
   //
   #ODK_Load_Instance (REQ:=#REQ,
@@ -39,7 +39,7 @@
   //
   // DO NOT CHANGE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE ABOVE OF THIS LINE !!
   //
 END_FUNCTION_BLOCK
@@ -48,8 +48,8 @@
 { S7_Optimized_Access := 'TRUE' }
 VERSION : 0.1
 //This block is AUTO GENERATED - DO NOT MODIFY this block!
-//Created by ODK_CodeGenerator version 205.100.101.18
-//at Mon March 15 10:24:55 2021
+//Created by ODK_CodeGenerator version 200.0.3002.1
+//at lun marzo 29 11:33:17 2021
 //********************************************************
   VAR_INPUT 
     REQ : Bool;
@@ -65,13 +65,13 @@
          'ODK_Unld_SFB_2012'; LibVersion := '1.0'} : ODK_Unld;
   END_VAR
   VAR CONSTANT 
-    _odk_internal_INSTANCE_ID : UDInt := 1237418461;
+    _odk_internal_INSTANCE_ID : UDInt := 4141663351;
   END_VAR
 BEGIN
   //
   // DO NOT CHANGE BELOW OF THIS LINE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE !!
   //
   #ODK_Unld_Instance (REQ:=#REQ,
@@ -83,7 +83,7 @@
   //
   // DO NOT CHANGE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE ABOVE OF THIS LINE !!
   //
 END_FUNCTION_BLOCK
@@ -91,8 +91,8 @@
 TYPE "ODK_AgentPLC_Realcontrol_flags"
 VERSION : 0.1
 //This block is AUTO GENERATED - DO NOT MODIFY this block!
-//Created by ODK_CodeGenerator version 205.100.101.18
-//at Mon March 15 10:24:55 2021
+//Created by ODK_CodeGenerator version 200.0.3002.1
+//at lun marzo 29 11:33:17 2021
 //********************************************************
   STRUCT
     "Control_Flag_New_Service" : BOOL;
@@ -104,8 +104,8 @@
 TYPE "ODK_AgentPLC_Realagent2plc"
 VERSION : 0.1
 //This block is AUTO GENERATED - DO NOT MODIFY this block!
-//Created by ODK_CodeGenerator version 205.100.101.18
-//at Mon March 15 10:24:55 2021
+//Created by ODK_CodeGenerator version 200.0.3002.1
+//at lun marzo 29 11:33:17 2021
 //********************************************************
   STRUCT
     "Id_Machine_Reference" : UDINT;
@@ -120,8 +120,8 @@
 TYPE "ODK_AgentPLC_Realplc2agent"
 VERSION : 0.1
 //This block is AUTO GENERATED - DO NOT MODIFY this block!
-//Created by ODK_CodeGenerator version 205.100.101.18
-//at Mon March 15 10:24:55 2021
+//Created by ODK_CodeGenerator version 200.0.3002.1
+//at lun marzo 29 11:33:17 2021
 //********************************************************
   STRUCT
     "Id_Machine_Reference" : UDINT;
@@ -140,8 +140,8 @@
 { S7_Optimized_Access := 'TRUE' }
 VERSION : 0.1
 //This block is AUTO GENERATED - DO NOT MODIFY this block!
-//Created by  ODK_CodeGenerator version 205.100.101.18
-//at Mon March 15 10:24:55 2021
+//Created by ODK_CodeGenerator version 200.0.3002.1
+//at lun marzo 29 11:33:17 2021
 //********************************************************
   VAR_INPUT
     REQ : Bool;
@@ -166,14 +166,14 @@
     _odk_internal_i : Int;
   END_VAR
   VAR CONSTANT 
-    _odk_internal_INSTANCE_ID : UDINT := 1237418461;
+    _odk_internal_INSTANCE_ID : UDINT := 4141663351;
     _odk_internal_COMMAND : UDINT := 4017992964;
   END_VAR
 BEGIN
   //
   // DO NOT CHANGE BELOW OF THIS LINE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE !!
   //
   #_odk_internal_Last_REQ := #REQ;	
@@ -191,23 +191,23 @@
   //
   // DO NOT CHANGE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE ABOVE OF THIS LINE !!
   //
 END_FUNCTION_BLOCK
 
-FUNCTION_BLOCK "ODK_AgentPLC_RealSampleWrite"
+FUNCTION_BLOCK "ODK_AgentPLC_RealsendAgent"
 { S7_Optimized_Access := 'TRUE' }
 VERSION : 0.1
 //This block is AUTO GENERATED - DO NOT MODIFY this block!
-//Created by  ODK_CodeGenerator version 205.100.101.18
-//at Mon March 15 10:24:55 2021
+//Created by ODK_CodeGenerator version 200.0.3002.1
+//at lun marzo 29 11:33:17 2021
 //********************************************************
 //Agent Init
   VAR_INPUT
     REQ : Bool;
-    "flags" : "ODK_AgentPLC_Realcontrol_flags";
-    "str_out" : "ODK_AgentPLC_Realplc2agent"; //Sends the Agent message   
+    "str1" : "ODK_AgentPLC_Realcontrol_flags";
+    "str2" : "ODK_AgentPLC_Realplc2agent"; //Sends the Agent message   
   END_VAR
   VAR_OUTPUT
     ERROR : Bool := false;
@@ -229,47 +229,47 @@
     _odk_internal_i : Int;
   END_VAR
   VAR CONSTANT 
-    _odk_internal_INSTANCE_ID : UDINT := 1237418461;
-    _odk_internal_COMMAND : UDINT := 3163984009;
+    _odk_internal_INSTANCE_ID : UDINT := 4141663351;
+    _odk_internal_COMMAND : UDINT := 149777562;
   END_VAR
 BEGIN
   //
   // DO NOT CHANGE BELOW OF THIS LINE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE !!
   //
   //Agent Init
   IF NOT #_odk_internal_Last_REQ & #REQ & NOT #_odk_internal_Last_BUSY THEN
     #_odk_internal_pos := 0;
-    IF (True = #flags.#Control_Flag_New_Service) THEN
+    IF (True = #str1.#Control_Flag_New_Service) THEN
       #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#1;
     ELSE
       #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#0;
     END_IF;
     #_odk_internal_pos  := #_odk_internal_pos + 1;
-    IF (True = #flags.#Control_Flag_Item_Completed) THEN
+    IF (True = #str1.#Control_Flag_Item_Completed) THEN
       #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#1;
     ELSE
       #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#0;
     END_IF;
     #_odk_internal_pos  := #_odk_internal_pos + 1;
-    IF (True = #flags.#Control_Flag_Service_Completed) THEN
+    IF (True = #str1.#Control_Flag_Service_Completed) THEN
       #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#1;
     ELSE
       #_odk_internal_IN_BUFFER[#_odk_internal_pos] := BYTE#0;
     END_IF;
     #_odk_internal_pos  := #_odk_internal_pos + 1;
-    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Machine_Reference, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Order_Reference, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Batch_Reference, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Ref_Subproduct_Type, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Id_Ref_Service_Type, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
-    _odk_internal_IN_BUFFER[#_odk_internal_pos] := USINT_TO_BYTE(#str_out.#Id_Item_Number);
+    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str2.#Id_Machine_Reference, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str2.#Id_Order_Reference, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str2.#Id_Batch_Reference, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str2.#Id_Ref_Subproduct_Type, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str2.#Id_Ref_Service_Type, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
+    _odk_internal_IN_BUFFER[#_odk_internal_pos] := USINT_TO_BYTE(#str2.#Id_Item_Number);
     #_odk_internal_pos  := #_odk_internal_pos +1;
-    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Data_Initial_Time_Stamp, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Data_Final_Time_Stamp, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str_out.#Data_Service_Time_Stamp, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str2.#Data_Initial_Time_Stamp, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str2.#Data_Final_Time_Stamp, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := WRITE_LITTLE ( src_variable := #str2.#Data_Service_Time_Stamp, dest_array := #_odk_internal_IN_BUFFER,  pos := #_odk_internal_pos);
     
   END_IF;
   #_odk_internal_Last_REQ := #REQ;	
@@ -287,17 +287,17 @@
   //
   // DO NOT CHANGE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE ABOVE OF THIS LINE !!
   //
 END_FUNCTION_BLOCK
 
-FUNCTION_BLOCK "ODK_AgentPLC_RealSampleRead"
+FUNCTION_BLOCK "ODK_AgentPLC_RealrecvAgent"
 { S7_Optimized_Access := 'TRUE' }
 VERSION : 0.1
 //This block is AUTO GENERATED - DO NOT MODIFY this block!
-//Created by  ODK_CodeGenerator version 205.100.101.18
-//at Mon March 15 10:24:55 2021
+//Created by ODK_CodeGenerator version 200.0.3002.1
+//at lun marzo 29 11:33:17 2021
 //********************************************************
   VAR_INPUT
     REQ : Bool;
@@ -308,12 +308,12 @@
     DONE : Bool := false;
     BUSY : Bool := false;
     STATUS : INT := 0;
-    "str_in" : "ODK_AgentPLC_Realagent2plc";
+    "str2" : "ODK_AgentPLC_Realagent2plc";
     "tRecv" : BOOL;
     "tData" : BOOL;
   END_VAR
   VAR_IN_OUT
-    "flags" : "ODK_AgentPLC_Realcontrol_flags"; //Receive the Agent message and parses the JSON to structure
+    "str1" : "ODK_AgentPLC_Realcontrol_flags"; //Receive the Agent message and parses the JSON to structure
   END_VAR
   VAR
     _odk_internal_Last_REQ : Bool := false;
@@ -329,32 +329,32 @@
     _odk_internal_i : Int;
   END_VAR
   VAR CONSTANT 
-    _odk_internal_INSTANCE_ID : UDINT := 1237418461;
-    _odk_internal_COMMAND : UDINT := 185329515;
+    _odk_internal_INSTANCE_ID : UDINT := 4141663351;
+    _odk_internal_COMMAND : UDINT := 3473752904;
   END_VAR
 BEGIN
   //
   // DO NOT CHANGE BELOW OF THIS LINE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE !!
   //
   IF NOT #_odk_internal_Last_REQ & #REQ & NOT #_odk_internal_Last_BUSY THEN
 
     #_odk_internal_pos := 0;
-    IF (True = #flags.#Control_Flag_New_Service) THEN
+    IF (True = #str1.#Control_Flag_New_Service) THEN
       #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#1;
     ELSE
       #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#0;
     END_IF;
     #_odk_internal_pos  := #_odk_internal_pos + 1;
-    IF (True = #flags.#Control_Flag_Item_Completed) THEN
+    IF (True = #str1.#Control_Flag_Item_Completed) THEN
       #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#1;
     ELSE
       #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#0;
     END_IF;
     #_odk_internal_pos  := #_odk_internal_pos + 1;
-    IF (True = #flags.#Control_Flag_Service_Completed) THEN
+    IF (True = #str1.#Control_Flag_Service_Completed) THEN
       #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#1;
     ELSE
       #_odk_internal_INOUT_BUFFER[#_odk_internal_pos] := BYTE#0;
@@ -374,19 +374,19 @@
                      STATUS=>#STATUS);
   IF NOT #BUSY & #_odk_internal_Last_BUSY & NOT #ERROR THEN
     #_odk_internal_pos := 0;
-    #flags.#Control_Flag_New_Service := BYTE_TO_BOOL(#_odk_internal_INOUT_BUFFER[#_odk_internal_pos]);
+    #str1.#Control_Flag_New_Service := BYTE_TO_BOOL(#_odk_internal_INOUT_BUFFER[#_odk_internal_pos]);
     #_odk_internal_pos  := #_odk_internal_pos + 1;
-    #flags.#Control_Flag_Item_Completed := BYTE_TO_BOOL(#_odk_internal_INOUT_BUFFER[#_odk_internal_pos]);
+    #str1.#Control_Flag_Item_Completed := BYTE_TO_BOOL(#_odk_internal_INOUT_BUFFER[#_odk_internal_pos]);
     #_odk_internal_pos  := #_odk_internal_pos + 1;
-    #flags.#Control_Flag_Service_Completed := BYTE_TO_BOOL(#_odk_internal_INOUT_BUFFER[#_odk_internal_pos]);
+    #str1.#Control_Flag_Service_Completed := BYTE_TO_BOOL(#_odk_internal_INOUT_BUFFER[#_odk_internal_pos]);
     #_odk_internal_pos  := #_odk_internal_pos + 1;
     #_odk_internal_pos := 0;
-    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Id_Machine_Reference, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Id_Order_Reference, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Id_Batch_Reference, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Id_Ref_Subproduct_Type, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
-    #_odk_internal_err := READ_LITTLE (dest_variable  := #str_in.#Operation_Ref_Service_Type, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
-    #str_in.#Operation_No_of_Items := BYTE_TO_USINT(_odk_internal_OUT_BUFFER[#_odk_internal_pos]);
+    #_odk_internal_err := READ_LITTLE (dest_variable  := #str2.#Id_Machine_Reference, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := READ_LITTLE (dest_variable  := #str2.#Id_Order_Reference, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := READ_LITTLE (dest_variable  := #str2.#Id_Batch_Reference, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := READ_LITTLE (dest_variable  := #str2.#Id_Ref_Subproduct_Type, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
+    #_odk_internal_err := READ_LITTLE (dest_variable  := #str2.#Operation_Ref_Service_Type, src_array := #_odk_internal_OUT_BUFFER,  pos := #_odk_internal_pos);
+    #str2.#Operation_No_of_Items := BYTE_TO_USINT(_odk_internal_OUT_BUFFER[#_odk_internal_pos]);
     #_odk_internal_pos  := #_odk_internal_pos +1;
     #tRecv := BYTE_TO_BOOL(#_odk_internal_OUT_BUFFER[#_odk_internal_pos]);
     #_odk_internal_pos  := #_odk_internal_pos + 1;
@@ -397,7 +397,7 @@
   //
   // DO NOT CHANGE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE ABOVE OF THIS LINE !!
   //
 END_FUNCTION_BLOCK
@@ -406,8 +406,8 @@
 { S7_Optimized_Access := 'TRUE' }
 VERSION : 0.1
 //This block is AUTO GENERATED - DO NOT MODIFY this block!
-//Created by  ODK_CodeGenerator version 205.100.101.18
-//at Mon March 15 10:24:55 2021
+//Created by ODK_CodeGenerator version 200.0.3002.1
+//at lun marzo 29 11:33:17 2021
 //********************************************************
   VAR_INPUT
     REQ : Bool;
@@ -432,14 +432,14 @@
     _odk_internal_i : Int;
   END_VAR
   VAR CONSTANT 
-    _odk_internal_INSTANCE_ID : UDINT := 1237418461;
+    _odk_internal_INSTANCE_ID : UDINT := 4141663351;
     _odk_internal_COMMAND : UDINT := 704312951;
   END_VAR
 BEGIN
   //
   // DO NOT CHANGE BELOW OF THIS LINE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE !!
   //
   #_odk_internal_Last_REQ := #REQ;	
@@ -457,7 +457,7 @@
   //
   // DO NOT CHANGE !!
   // This is an automatic generated block by the
-  // SIMATIC ODK 1500S V2.5.1
+  // SIMATIC ODK 1500S V2.0
   // DO NOT CHANGE ABOVE OF THIS LINE !!
   //
 END_FUNCTION_BLOCK
Index: odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Execution.cpp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * This file is AUTO GENERATED - DO NOT MODIFY this file. \r\n * This file contains the execute function and trace helpers for ODK 1500S.\r\n *\r\n * File created by ODK_CodeGenerator version 205.100.101.18\r\n * at Mon March 15 10:24:55 2021\r\n*/\r\n\r\n#include \"ODK_Functions.h\"\r\n#include \"ODK_CpuReadData.h\"\r\n#include \"ODK_CpuReadWriteData.h\"\r\n\r\n#define ODK_COMMAND_NOT_IMPLEMENTED    0x8098 \r\nEXPORT_API ODK_UINT32 g_ODK1500sBuildVersion = (2 << 24) + (5 << 16) + (1 << 8) + 0;\r\n // first if\r\n\r\n// declaration of the callbacks for testing them in Execute()\r\nEXPORT_API ODK_RESULT OnLoad (void);\r\nEXPORT_API ODK_RESULT OnUnload (void);\r\nEXPORT_API ODK_RESULT OnRun (void);\r\nEXPORT_API ODK_RESULT OnStop (void);\r\n\r\n//command enums\r\ntypedef enum CommandHash_e\r\n{\r\n  FCT_HASH_initAgent = 0xEF7DB504,\r\n  FCT_HASH_SampleWrite = 0xBC969089,\r\n  FCT_HASH_SampleRead = 0x0B0BE76B,\r\n  FCT_HASH_sendConf = 0x29FAF677\r\n}CommandHash_t;\r\n\r\n#pragma optimize( \"\", off )\r\nEXPORT_API ODK_RESULT ExecuteV25 ( const ODK_UINT32 cmd\r\n                                 , const ODK_UINT32 inLen   , const char* const in\r\n                                 , const ODK_UINT32 inoutLen, const char*       inout\r\n                                 , const ODK_UINT32 outLen  , const char*       out)\r\n{\r\n  switch (cmd)\r\n  {\r\n    case FCT_HASH_initAgent:\r\n    {\r\n      return initAgent ();\r\n    }\r\n    case FCT_HASH_SampleWrite:\r\n    {\r\n      return SampleWrite (*((control_flags*) &(in[0])), *((plc2agent*) &(in[3])));\r\n    }\r\n    case FCT_HASH_SampleRead:\r\n    {\r\n      return SampleRead (*((agent2plc*) &(out[0])), *((ODK_BOOL*) &(out[21])), *((ODK_BOOL*) &(out[22])), *((control_flags*) &(inout[0])));\r\n    }\r\n    case FCT_HASH_sendConf:\r\n    {\r\n      return sendConf ();\r\n    }\r\n    default:\r\n    {\r\n      typedef ODK_RESULT (*t_CallbackFunction)(void);\r\n      #pragma warning ( disable: 4189 )\r\n      // check the existence of the callback functions\r\n      // (but suppress warning of not used variables)\r\n      {\r\n        t_CallbackFunction tmp1 = &OnLoad;\r\n        t_CallbackFunction tmp2 = &OnUnload;\r\n        t_CallbackFunction tmp3 = &OnRun;\r\n        t_CallbackFunction tmp4 = &OnStop;\r\n      }\r\n      return ODK_COMMAND_NOT_IMPLEMENTED;\r\n    }\r\n  }\r\n}\r\n#pragma optimize( \"\", on )\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Execution.cpp b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Execution.cpp
--- a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Execution.cpp	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Execution.cpp	(date 1617013340186)
@@ -2,8 +2,8 @@
  * This file is AUTO GENERATED - DO NOT MODIFY this file. 
  * This file contains the execute function and trace helpers for ODK 1500S.
  *
- * File created by ODK_CodeGenerator version 205.100.101.18
- * at Mon March 15 10:24:55 2021
+ * File created by ODK_CodeGenerator version 200.0.3002.1
+ * at lun marzo 29 11:33:16 2021
 */
 
 #include "ODK_Functions.h"
@@ -11,8 +11,7 @@
 #include "ODK_CpuReadWriteData.h"
 
 #define ODK_COMMAND_NOT_IMPLEMENTED    0x8098 
-EXPORT_API ODK_UINT32 g_ODK1500sBuildVersion = (2 << 24) + (5 << 16) + (1 << 8) + 0;
- // first if
+ODK_UINT32 g_ODK1500sBuildVersion = (2 << 24) + (0 << 16) + (0 << 8) + 0;
 
 // declaration of the callbacks for testing them in Execute()
 EXPORT_API ODK_RESULT OnLoad (void);
@@ -24,16 +23,17 @@
 typedef enum CommandHash_e
 {
   FCT_HASH_initAgent = 0xEF7DB504,
-  FCT_HASH_SampleWrite = 0xBC969089,
-  FCT_HASH_SampleRead = 0x0B0BE76B,
+  FCT_HASH_sendAgent = 0x08ED6C9A,
+  FCT_HASH_recvAgent = 0xCF0D4348,
   FCT_HASH_sendConf = 0x29FAF677
 }CommandHash_t;
 
 #pragma optimize( "", off )
-EXPORT_API ODK_RESULT ExecuteV25 ( const ODK_UINT32 cmd
-                                 , const ODK_UINT32 inLen   , const char* const in
-                                 , const ODK_UINT32 inoutLen, const char*       inout
-                                 , const ODK_UINT32 outLen  , const char*       out)
+//Execute()
+EXPORT_API ODK_RESULT Execute (ODK_UINT32        cmd
+                              ,const char* const in
+                              ,const char*       inout
+                              ,const char*       out)
 {
   switch (cmd)
   {
@@ -41,13 +41,13 @@
     {
       return initAgent ();
     }
-    case FCT_HASH_SampleWrite:
+    case FCT_HASH_sendAgent:
     {
-      return SampleWrite (*((control_flags*) &(in[0])), *((plc2agent*) &(in[3])));
+      return sendAgent (*((control_flags*) &(in[0])), *((plc2agent*) &(in[3])));
     }
-    case FCT_HASH_SampleRead:
+    case FCT_HASH_recvAgent:
     {
-      return SampleRead (*((agent2plc*) &(out[0])), *((ODK_BOOL*) &(out[21])), *((ODK_BOOL*) &(out[22])), *((control_flags*) &(inout[0])));
+      return recvAgent (*((agent2plc*) &(out[0])), *((ODK_BOOL*) &(out[21])), *((ODK_BOOL*) &(out[22])), *((control_flags*) &(inout[0])));
     }
     case FCT_HASH_sendConf:
     {
Index: MTPs-Main-Container.txt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>http://U106103.adm.ehu.es:7778/acc\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/MTPs-Main-Container.txt b/MTPs-Main-Container.txt
--- a/MTPs-Main-Container.txt	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/MTPs-Main-Container.txt	(date 1617013676587)
@@ -1,1 +1,2 @@
-http://U106103.adm.ehu.es:7778/acc
+http://U107490.adm.ehu.es:7778/acc
+
Index: 20_machine1.cmd
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>java -Dlog4j.configurationFile=\"log4j2.xml\" -cp \".\\lib\\jade;.\\lib\\log4j\\log4j-api-2.3.jar;.\\lib\\log4j\\log4j-core-2.3.jar;.\\lib\\commons\\commons-codec-1.3.jar;.\\lib\\commons\\commons-io-2.6.jar;.\\lib\\Gson\\gson-2.8.6.jar;.\\lib\\commons\\commons-lang3-3.8.1.jar;.\\classes\" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.2 -port 1099 -local-port 1099 auxma-local:es.ehu.domain.manufacturing.agents.MachineAgent(\"Station1\",\"Services\",\"classes/resources/ResInstances/Station1.xml\",\"classes/resources/ResInstances/UpdatedPlan1.xml\")\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/20_machine1.cmd b/20_machine1.cmd
--- a/20_machine1.cmd	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/20_machine1.cmd	(date 1617013676540)
@@ -1,1 +1,2 @@
-java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar;.\lib\commons\commons-codec-1.3.jar;.\lib\commons\commons-io-2.6.jar;.\lib\Gson\gson-2.8.6.jar;.\lib\commons\commons-lang3-3.8.1.jar;.\classes" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.2 -port 1099 -local-port 1099 auxma-local:es.ehu.domain.manufacturing.agents.MachineAgent("Station1","Services","classes/resources/ResInstances/Station1.xml","classes/resources/ResInstances/UpdatedPlan1.xml")
+java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar;.\lib\commons\commons-codec-1.3.jar;.\lib\commons\commons-io-2.6.jar;.\lib\Gson\gson-2.8.6.jar;.\lib\commons\commons-lang3-3.8.1.jar;.\classes" jade.Boot -container -host 192.168.2.17 -local-host 192.168.2.3 -port 1099 -local-port 1099 auxma-local:es.ehu.domain.manufacturing.agents.MachineAgent("Station1","Services","classes/resources/ResInstances/Station1.xml","classes/resources/ResInstances/UpdatedPlan1.xml")
+
Index: APDescription.txt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>( ap-description  :name \"192.168.2.250:1099/JADE\" :ap-services (set ( ap-service  :name fipa.mts.mtp.http.std :type fipa.mts.mtp.http.std :addresses (sequence http://U106103.adm.ehu.es:7778/acc))))\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/APDescription.txt b/APDescription.txt
--- a/APDescription.txt	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/APDescription.txt	(date 1617013676556)
@@ -1,1 +1,2 @@
-( ap-description  :name "192.168.2.250:1099/JADE" :ap-services (set ( ap-service  :name fipa.mts.mtp.http.std :type fipa.mts.mtp.http.std :addresses (sequence http://U106103.adm.ehu.es:7778/acc))))
+
+( ap-description  :name "192.168.2.17:1099/JADE" :ap-services (set ( ap-service  :name fipa.mts.mtp.http.std :type fipa.mts.mtp.http.std :addresses (sequence http://U107490.adm.ehu.es:7778/acc))))
Index: odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/cg.tmp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>2233347447
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/cg.tmp b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/cg.tmp
--- a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/cg.tmp	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/cg.tmp	(date 1617013340233)
@@ -1,1 +1,1 @@
-2233347447
\ No newline at end of file
+4285831283
\ No newline at end of file
Index: 30_startprocnode_local.cmd
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>java -Dlog4j.configurationFile=\"log4j2.xml\" -cp \".\\lib\\jade;.\\lib\\log4j\\log4j-api-2.3.jar;.\\lib\\log4j\\log4j-core-2.3.jar;.\\lib\\commons\\commons-codec-1.3.jar;.\\lib\\commons\\commons-io-2.6.jar;.\\classes\" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.250 -port 1099 -local-port 1099 auxlocal:es.ehu.platform.agents.ProcNodeAgent(\"System=system\",\"description=description\",\"refServID=id55\")\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/30_startprocnode_local.cmd b/30_startprocnode_local.cmd
--- a/30_startprocnode_local.cmd	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/30_startprocnode_local.cmd	(date 1617013676540)
@@ -1,1 +1,2 @@
-java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar;.\lib\commons\commons-codec-1.3.jar;.\lib\commons\commons-io-2.6.jar;.\classes" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.250 -port 1099 -local-port 1099 auxlocal:es.ehu.platform.agents.ProcNodeAgent("System=system","description=description","refServID=id55")
+java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar;.\lib\commons\commons-io-2.6.jar;.\lib\Gson\gson-2.8.6.jar;.\lib\commons\commons-codec-1.3.jar;.\lib\commons\commons-io-2.6.jar;.\classes" jade.Boot -container -host 192.168.2.17 -local-host 192.168.2.17 -port 1099 -local-port 1099 auxlocal:es.ehu.platform.agents.ProcNodeAgent("System=system","description=description","refServID=id55")
+
Index: odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.log
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>  ---- ODK Code Generator started ----\r\n  Parsing file ODK_AgentPLC_Real.odk\r\n  Generating file ODK_Execution.cpp\r\n  Generating file ODK_Types.h\r\n  Generating file ODK_Functions.h\r\n  Generating file ODK_AgentPLC_Real.scl\r\n  Checking file ODK_AgentPLC_Real.rc\r\n  ---- ODK Code Generator finished ----\r\n  stdafx.cpp\r\n  dllmain.cpp\r\n  ODK_AgentPLC_Real.cpp\r\nC:\\compartida_U107490\\ODK_AgentPLC_Real\\ODK_AgentPLC_Real\\ODK_AgentPLC_Real.cpp(407,46): warning C4805: '==': combinación no segura del tipo 'const ODK_BOOL' y el tipo 'bool' en la operación\r\nC:\\compartida_U107490\\ODK_AgentPLC_Real\\ODK_AgentPLC_Real\\ODK_AgentPLC_Real.cpp(433,2): warning C4996: 'sprintf': This function or variable may be unsafe. Consider using sprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.\r\n  ODK_CpuReadData.cpp\r\n  ODK_CpuReadWriteData.cpp\r\n  ODK_StringHelper.cpp\r\n  Generando código...\r\nC:\\compartida_U107490\\ODK_AgentPLC_Real\\ODK_AgentPLC_Real\\ODK_AgentPLC_Real.cpp(370): warning C4715: 'SampleRead': no todas las rutas de acceso de control devuelven un valor\r\n  ODK_Execution.cpp\r\n     Creando biblioteca C:\\compartida_U107490\\ODK_AgentPLC_Real\\Release\\ODK_AgentPLC_Real.lib y objeto C:\\compartida_U107490\\ODK_AgentPLC_Real\\Release\\ODK_AgentPLC_Real.exp\r\n  ODK_AgentPLC_Real.vcxproj -> C:\\compartida_U107490\\ODK_AgentPLC_Real\\Release\\ODK_AgentPLC_Real.dll\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.log b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.log
--- a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.log	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/Release/ODK_AgentPLC_Real.log	(date 1617013340264)
@@ -9,13 +9,16 @@
   stdafx.cpp
   dllmain.cpp
   ODK_AgentPLC_Real.cpp
-C:\compartida_U107490\ODK_AgentPLC_Real\ODK_AgentPLC_Real\ODK_AgentPLC_Real.cpp(407,46): warning C4805: '==': combinación no segura del tipo 'const ODK_BOOL' y el tipo 'bool' en la operación
-C:\compartida_U107490\ODK_AgentPLC_Real\ODK_AgentPLC_Real\ODK_AgentPLC_Real.cpp(433,2): warning C4996: 'sprintf': This function or variable may be unsafe. Consider using sprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
+ODK_AgentPLC_Real.cpp(330): warning C4800: 'const ODK_BOOL': forcing value to bool 'true' or 'false' (performance warning)
+ODK_AgentPLC_Real.cpp(331): warning C4800: 'const ODK_BOOL': forcing value to bool 'true' or 'false' (performance warning)
+ODK_AgentPLC_Real.cpp(365): warning C4805: '==': unsafe mix of type 'const ODK_BOOL' and type 'bool' in operation
+ODK_AgentPLC_Real.cpp(388): warning C4996: 'sprintf': This function or variable may be unsafe. Consider using sprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
+  C:\Program Files (x86)\Windows Kits\10\Include\10.0.10240.0\ucrt\stdio.h(1769): note: see declaration of 'sprintf'
   ODK_CpuReadData.cpp
   ODK_CpuReadWriteData.cpp
   ODK_StringHelper.cpp
-  Generando código...
-C:\compartida_U107490\ODK_AgentPLC_Real\ODK_AgentPLC_Real\ODK_AgentPLC_Real.cpp(370): warning C4715: 'SampleRead': no todas las rutas de acceso de control devuelven un valor
+  Generating Code...
   ODK_Execution.cpp
-     Creando biblioteca C:\compartida_U107490\ODK_AgentPLC_Real\Release\ODK_AgentPLC_Real.lib y objeto C:\compartida_U107490\ODK_AgentPLC_Real\Release\ODK_AgentPLC_Real.exp
-  ODK_AgentPLC_Real.vcxproj -> C:\compartida_U107490\ODK_AgentPLC_Real\Release\ODK_AgentPLC_Real.dll
+     Creating library C:\Users\admin\Desktop\ODK_AgentPLC_Real\Release\ODK_AgentPLC_Real.lib and object C:\Users\admin\Desktop\ODK_AgentPLC_Real\Release\ODK_AgentPLC_Real.exp
+  ODK_AgentPLC_Real.vcxproj -> C:\Users\admin\Desktop\ODK_AgentPLC_Real\Release\ODK_AgentPLC_Real.dll
+  ODK_AgentPLC_Real.vcxproj -> C:\Users\admin\Desktop\ODK_AgentPLC_Real\Release\ODK_AgentPLC_Real.pdb (Full PDB)
Index: 01_gui_test.cmd
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>java -Dlog4j.configurationFile=\"log4j2.xml\" -cp \".\\lib\\jade;.\\lib\\log4j\\log4j-api-2.3.jar;.\\lib\\log4j\\log4j-core-2.3.jar\" jade.Boot -gui -host 192.168.2.250 -local-host 192.168.2.250 -port 1099 -local-port 1099
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/01_gui_test.cmd b/01_gui_test.cmd
--- a/01_gui_test.cmd	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/01_gui_test.cmd	(date 1617013676634)
@@ -1,1 +1,1 @@
-java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar" jade.Boot -gui -host 192.168.2.250 -local-host 192.168.2.250 -port 1099 -local-port 1099
\ No newline at end of file
+java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar" jade.Boot -gui -host 192.168.2.17 -local-host 192.168.2.17 -port 1099 -local-port 1099
\ No newline at end of file
Index: 32_startproctnode2.sh
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>java -Dlog4j.configurationFile=\"log4j2.xml\" -cp \"./lib/jade:./lib/log4j/log4j-api-2.3.jar:./lib/log4j/log4j-core-2.3.jar:./lib/commons/commons-codec-1.3.jar:./lib/commons/commons-io-2.6.jar:./classes\" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.20 auxnode2:es.ehu.platform.agents.ProcNodeAgent\\(\"System=system\",\"description=description\",\"refServID=id57\"\\)\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/32_startproctnode2.sh b/32_startproctnode2.sh
--- a/32_startproctnode2.sh	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/32_startproctnode2.sh	(date 1617013676618)
@@ -1,1 +1,2 @@
-java -Dlog4j.configurationFile="log4j2.xml" -cp "./lib/jade:./lib/log4j/log4j-api-2.3.jar:./lib/log4j/log4j-core-2.3.jar:./lib/commons/commons-codec-1.3.jar:./lib/commons/commons-io-2.6.jar:./classes" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.20 auxnode2:es.ehu.platform.agents.ProcNodeAgent\("System=system","description=description","refServID=id57"\)
+java -Dlog4j.configurationFile="log4j2.xml" -cp "./lib/jade:./lib/log4j/log4j-api-2.3.jar:./lib/log4j/log4j-core-2.3.jar:./lib/commons/commons-codec-1.3.jar:./lib/commons/commons-io-2.6.jar:./classes" jade.Boot -container -host 192.168.2.17 -local-host 192.168.2.20 auxnode2:es.ehu.platform.agents.ProcNodeAgent\("System=system","description=description","refServID=id57"\)
+
Index: src/es/ehu/domain/manufacturing/agents/cognitive/ExternalJADEgw.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package es.ehu.domain.manufacturing.agents.cognitive;\r\n\r\nimport com.google.gson.Gson;\r\nimport es.ehu.domain.manufacturing.utilities.StructMessage;\r\nimport jade.core.Profile;\r\nimport jade.util.leap.Properties;\r\nimport jade.wrapper.gateway.JadeGateway;\r\n\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.PrintStream;\r\n\r\npublic class ExternalJADEgw {\r\n\r\n    public static void agentInit(String machineID){\r\n        redirectOutput();\r\n        System.out.println(\"->Java Agent Init\");\r\n//        String host = \"127.0.0.1\";              //Local host IP)\r\n        String host = \"192.168.2.250\";              // host of Alejandro PC\r\n        String localHost = \"192.168.2.2\";              //Local host of PLC\r\n        String port = \"1099\";                   //Port on which the agent manager is running\r\n\r\n        Properties pp = new Properties();\r\n        pp.setProperty(Profile.MAIN_HOST, host);\r\n        pp.setProperty(Profile.LOCAL_HOST, localHost);\r\n        pp.setProperty(Profile.MAIN_PORT, port);\r\n        pp.setProperty(Profile.LOCAL_PORT, port);\r\n\r\n        String containerName = \"GatewayCont\" + machineID;   // se define el nombre del contenedor donde se inicializara el agente\r\n        pp.setProperty(Profile.CONTAINER_NAME, containerName);      //-->Name ControlGatewayContX\r\n        JadeGateway.init(\"es.ehu.domain.manufacturing.agents.cognitive.GWAgent\",pp);    //Gateway Agent Initialization, must define package directory\r\n        System.out.println(\"<-Java Agent Init\");\r\n    }\r\n\r\n    //Function to send ACL messages by receiving a String that is added in the message.\r\n    public static void send(String msgOut) {  //Sends the data String that has been given\r\n        System.out.println(\"->Java Send\");\r\n        String host = \"192.168.2.250\";              // host of Alejandro PC\r\n        String localHost = \"192.168.2.2\";              //Local host of PLC\r\n        String port = \"1099\";                   //Port on which the agent manager is running\r\n\r\n        Properties pp = new Properties();\r\n        pp.setProperty(Profile.MAIN_HOST, host);\r\n        pp.setProperty(Profile.LOCAL_HOST, localHost);\r\n        pp.setProperty(Profile.MAIN_PORT, port);\r\n        pp.setProperty(Profile.LOCAL_PORT, port);\r\n\r\n        String containerName = \"GatewayCont1\";   // se define el nombre del contenedor donde se inicializara el agente\r\n        pp.setProperty(Profile.CONTAINER_NAME, containerName);      //-->Name ControlGatewayContX\r\n        System.out.println(\"Before JadeGateway.init\");\r\n        JadeGateway.init(\"es.ehu.domain.manufacturing.agents.cognitive.GWAgent\",pp);    //Gateway Agent Initialization, must define package directory\r\n        System.out.println(\"After JadeGateway.init\");\r\n        StructMessage strMessage = new StructMessage();\r\n        strMessage.setAction(\"send\");\r\n        strMessage.setMessage(msgOut);\r\n        System.out.println(\"strMessage is configured\");\r\n        if(msgOut.contains(\"Received\")){    // Depending of the message type (confirmation or data exchanging) the performative will be different\r\n            strMessage.setPerformative(7);  // Performative = INFORM\r\n            System.out.println(\"Performative is set to INFORM\");\r\n        } else {\r\n            strMessage.setPerformative(16); // Performative = REQUEST\r\n        }\r\n        System.out.println(\"--Sended message: \" + strMessage.readMessage());\r\n        try {\r\n            JadeGateway.execute(strMessage);    // calls processCommand method of Gateway Agent\r\n        } catch(Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        System.out.println(\"<-Java Send\");\r\n    }\r\n\r\n    //Function for reading the data received in ACL messages\r\n    public static String recv() {\r\n//        String recvMsg = \"{\\\"Operation_No_of_Items\\\":3,\\\"Id_Batch_Reference\\\":111,\\\"Id_Machine_Reference\\\":11,\\\"Operation_Ref_Service_Type\\\":4,\\\"Control_Flag_New_Service\\\":true,\\\"Id_Order_Reference\\\":11,\\\"Id_Ref_Subproduct_Type\\\":1}\";\r\n        String recvMsg;\r\n        StructMessage strMessage = new StructMessage();\r\n        System.out.println(\"strMessage is declared\");\r\n        strMessage.setAction(\"receive\");\r\n        System.out.println(\"action is set to reveice\");\r\n        try {\r\n            JadeGateway.execute(strMessage);\r\n            System.out.println(\"receive operation has been executed\");\r\n        } catch(Exception e) {\r\n            System.out.println(e);\r\n        }\r\n        if(strMessage.readNewData()){\r\n            recvMsg=strMessage.readMessage();\r\n            System.out.println(\"--Received: \" + recvMsg);\r\n        }else{\r\n            System.out.println(\"--No answer\");\r\n            recvMsg=\"\";\r\n        }\r\n        System.out.println(\"<-Java recv\");\r\n        return recvMsg;\r\n    }\r\n\r\n    //Modifica la direccon de Sistem.out, teniendo las trazas en un fichero en lugar de por terminal.\r\n    public static void redirectOutput(){\r\n        // Create a log directory\r\n        File directoryLogs = new File(\"C:\\\\Users\\\\Operator\\\\Documents\");\r\n        directoryLogs.mkdirs();\r\n        try {\r\n            // Create a log file\r\n            File fileLog = new File(directoryLogs, \"log-java.txt\");\r\n            fileLog.createNewFile();\r\n            // Create a stream to to the log file\r\n            FileOutputStream f = new FileOutputStream(fileLog);\r\n            System.setOut(new PrintStream(f));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/src/es/ehu/domain/manufacturing/agents/cognitive/ExternalJADEgw.java b/src/es/ehu/domain/manufacturing/agents/cognitive/ExternalJADEgw.java
--- a/src/es/ehu/domain/manufacturing/agents/cognitive/ExternalJADEgw.java	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/src/es/ehu/domain/manufacturing/agents/cognitive/ExternalJADEgw.java	(date 1617013579583)
@@ -14,11 +14,11 @@
 public class ExternalJADEgw {
 
     public static void agentInit(String machineID){
-        redirectOutput();
+        //redirectOutput();
         System.out.println("->Java Agent Init");
 //        String host = "127.0.0.1";              //Local host IP)
-        String host = "192.168.2.250";              // host of Alejandro PC
-        String localHost = "192.168.2.2";              //Local host of PLC
+        String host = "192.168.2.17";              // host of Alejandro PC
+        String localHost = "192.168.2.3";              //Local host of PLC
         String port = "1099";                   //Port on which the agent manager is running
 
         Properties pp = new Properties();
@@ -30,14 +30,21 @@
         String containerName = "GatewayCont" + machineID;   // se define el nombre del contenedor donde se inicializara el agente
         pp.setProperty(Profile.CONTAINER_NAME, containerName);      //-->Name ControlGatewayContX
         JadeGateway.init("es.ehu.domain.manufacturing.agents.cognitive.GWAgent",pp);    //Gateway Agent Initialization, must define package directory
+        StructMessage strMessage = new StructMessage();
+        strMessage.setAction("init");
+        try {
+            JadeGateway.execute(strMessage);    // calls processCommand method of Gateway Agent
+        } catch(Exception e) {
+            e.printStackTrace();
+        }
         System.out.println("<-Java Agent Init");
     }
 
     //Function to send ACL messages by receiving a String that is added in the message.
     public static void send(String msgOut) {  //Sends the data String that has been given
         System.out.println("->Java Send");
-        String host = "192.168.2.250";              // host of Alejandro PC
-        String localHost = "192.168.2.2";              //Local host of PLC
+        String host = "192.168.2.17";              // host of Alejandro PC
+        String localHost = "192.168.2.3";              //Local host of PLC
         String port = "1099";                   //Port on which the agent manager is running
 
         Properties pp = new Properties();
@@ -48,16 +55,14 @@
 
         String containerName = "GatewayCont1";   // se define el nombre del contenedor donde se inicializara el agente
         pp.setProperty(Profile.CONTAINER_NAME, containerName);      //-->Name ControlGatewayContX
-        System.out.println("Before JadeGateway.init");
         JadeGateway.init("es.ehu.domain.manufacturing.agents.cognitive.GWAgent",pp);    //Gateway Agent Initialization, must define package directory
-        System.out.println("After JadeGateway.init");
         StructMessage strMessage = new StructMessage();
         strMessage.setAction("send");
         strMessage.setMessage(msgOut);
-        System.out.println("strMessage is configured");
+        //Test
+
         if(msgOut.contains("Received")){    // Depending of the message type (confirmation or data exchanging) the performative will be different
             strMessage.setPerformative(7);  // Performative = INFORM
-            System.out.println("Performative is set to INFORM");
         } else {
             strMessage.setPerformative(16); // Performative = REQUEST
         }
@@ -75,12 +80,10 @@
 //        String recvMsg = "{\"Operation_No_of_Items\":3,\"Id_Batch_Reference\":111,\"Id_Machine_Reference\":11,\"Operation_Ref_Service_Type\":4,\"Control_Flag_New_Service\":true,\"Id_Order_Reference\":11,\"Id_Ref_Subproduct_Type\":1}";
         String recvMsg;
         StructMessage strMessage = new StructMessage();
-        System.out.println("strMessage is declared");
         strMessage.setAction("receive");
-        System.out.println("action is set to reveice");
+        System.out.println("Calling Execute");
         try {
             JadeGateway.execute(strMessage);
-            System.out.println("receive operation has been executed");
         } catch(Exception e) {
             System.out.println(e);
         }
@@ -102,7 +105,7 @@
         directoryLogs.mkdirs();
         try {
             // Create a log file
-            File fileLog = new File(directoryLogs, "log-java.txt");
+            File fileLog = new File(directoryLogs, "debugFile.txt");
             fileLog.createNewFile();
             // Create a stream to to the log file
             FileOutputStream f = new FileOutputStream(fileLog);
Index: 31_startprocnode1.sh
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>java -Dlog4j.configurationFile=\"log4j2.xml\" -cp \"./lib/jade:./lib/log4j/log4j-api-2.3.jar:./lib/log4j/log4j-core-2.3.jar:./lib/commons/commons-codec-1.3.jar:./lib/commons/commons-io-2.6.jar:./classes\" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.200 auxnode1:es.ehu.platform.agents.ProcNodeAgent\\(\"System=system\",\"description=description\",\"refServID=id56\"\\)\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/31_startprocnode1.sh b/31_startprocnode1.sh
--- a/31_startprocnode1.sh	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/31_startprocnode1.sh	(date 1617013676571)
@@ -1,1 +1,2 @@
-java -Dlog4j.configurationFile="log4j2.xml" -cp "./lib/jade:./lib/log4j/log4j-api-2.3.jar:./lib/log4j/log4j-core-2.3.jar:./lib/commons/commons-codec-1.3.jar:./lib/commons/commons-io-2.6.jar:./classes" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.200 auxnode1:es.ehu.platform.agents.ProcNodeAgent\("System=system","description=description","refServID=id56"\)
+java -Dlog4j.configurationFile="log4j2.xml" -cp "./lib/jade:./lib/log4j/log4j-api-2.3.jar:./lib/log4j/log4j-core-2.3.jar:./lib/commons/commons-codec-1.3.jar:./lib/commons/commons-io-2.6.jar:./classes" jade.Boot -container -host 192.168.2.17 -local-host 192.168.2.200 auxnode1:es.ehu.platform.agents.ProcNodeAgent\("System=system","description=description","refServID=id56"\)
+
Index: 4_planner.cmd
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>java -Dlog4j.configurationFile=\"log4j2.xml\" -cp \".\\lib\\jade;.\\lib\\log4j\\log4j-api-2.3.jar;.\\lib\\log4j\\log4j-core-2.3.jar;.\\lib\\commons\\commons-codec-1.3.jar;.\\lib\\commons\\commons-io-2.6.jar;.\\classes\" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.250 -port 1099 -local-port 1099 planner:es.ehu.domain.manufacturing.utilities.Planner
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/4_planner.cmd b/4_planner.cmd
--- a/4_planner.cmd	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/4_planner.cmd	(date 1617013676602)
@@ -1,1 +1,1 @@
-java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar;.\lib\commons\commons-codec-1.3.jar;.\lib\commons\commons-io-2.6.jar;.\classes" jade.Boot -container -host 192.168.2.250 -local-host 192.168.2.250 -port 1099 -local-port 1099 planner:es.ehu.domain.manufacturing.utilities.Planner
\ No newline at end of file
+java -Dlog4j.configurationFile="log4j2.xml" -cp ".\lib\jade;.\lib\log4j\log4j-api-2.3.jar;.\lib\log4j\log4j-core-2.3.jar;.\lib\commons\commons-codec-1.3.jar;.\lib\commons\commons-io-2.6.jar;.\classes" jade.Boot -container -host 192.168.2.17 -local-host 192.168.2.17 -port 1099 -local-port 1099 planner:es.ehu.domain.manufacturing.utilities.Planner
\ No newline at end of file
Index: odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Types.h
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/* \r\n * This file is AUTO GENERATED - DO NOT MODIFY this file. \r\n * This file contains the data types of ODK 1500S.\r\n *\r\n * File created by ODK_CodeGenerator version 205.100.101.18 \r\n * at Mon March 15 10:24:55 2021 \r\n */\r\n\r\n#if !defined ODK_Types_H\r\n#define ODK_Types_H\r\n\r\n#include <stdint.h>\r\n\r\n#define  ODK_SUCCESS         0x0000\r\n#define  ODK_USER_ERROR_BASE 0xF000\r\n\r\n#define  ODK_TRUE            1\r\n#define  ODK_FALSE           0\r\n\r\ntypedef  double              ODK_DOUBLE;\r\ntypedef  float               ODK_FLOAT;\r\ntypedef  int64_t             ODK_INT64;\r\ntypedef  int32_t             ODK_INT32;\r\ntypedef  int16_t             ODK_INT16;\r\ntypedef  int8_t              ODK_INT8;\r\ntypedef  uint64_t            ODK_UINT64;\r\ntypedef  uint32_t            ODK_UINT32;\r\ntypedef  uint16_t            ODK_UINT16;\r\ntypedef  uint8_t             ODK_UINT8;\r\ntypedef  uint64_t            ODK_LWORD;\r\ntypedef  uint32_t            ODK_DWORD;\r\ntypedef  uint16_t            ODK_WORD;\r\ntypedef  uint8_t             ODK_BYTE;\r\ntypedef  uint8_t             ODK_BOOL;\r\ntypedef  int64_t             ODK_LTIME;\r\ntypedef  int32_t             ODK_TIME;\r\ntypedef  uint64_t            ODK_LDT;\r\ntypedef  uint64_t            ODK_LTOD;\r\ntypedef  uint32_t            ODK_TOD;\r\ntypedef  uint8_t             ODK_S7STRING;\r\ntypedef  uint16_t            ODK_S7WSTRING;\r\ntypedef  wchar_t             ODK_WCHAR;\r\ntypedef  char                ODK_CHAR;\r\ntypedef  uint16_t            ODK_RESULT;\r\n\r\n#pragma pack(push,1)\r\ntypedef struct ODK_DTL_s\r\n{\r\n  ODK_UINT16      Year;\r\n  ODK_UINT8       Month;\r\n  ODK_UINT8       Day;\r\n  ODK_UINT8       Weekday;\r\n  ODK_UINT8       Hour;\r\n  ODK_UINT8       Minute;\r\n  ODK_UINT8       Second;\r\n  ODK_UINT32      Nanosecond;\r\n} ODK_DTL;\r\n#pragma pack(pop)\r\n\r\n// VARIANT\r\ntypedef struct ODK_VARIANT_s\r\n{\r\n  ODK_UINT32    Len;\r\n  ODK_UINT8*    pData;\r\n} ODK_VARIANT;\r\n\r\n\r\n#pragma pack(push,1)\r\ntypedef struct\r\n{\r\n  ODK_BOOL Control_Flag_New_Service;\r\n  ODK_BOOL Control_Flag_Item_Completed;\r\n  ODK_BOOL Control_Flag_Service_Completed;\r\n}control_flags;\r\n#pragma pack(pop)\r\n\r\n#pragma pack(push,1)\r\ntypedef struct\r\n{\r\n  ODK_UINT32 Id_Machine_Reference;\r\n  ODK_UINT32 Id_Order_Reference;\r\n  ODK_UINT32 Id_Batch_Reference;\r\n  ODK_UINT32 Id_Ref_Subproduct_Type;\r\n  ODK_UINT32 Operation_Ref_Service_Type;\r\n  ODK_UINT8 Operation_No_of_Items;\r\n}agent2plc;\r\n#pragma pack(pop)\r\n\r\n#pragma pack(push,1)\r\ntypedef struct\r\n{\r\n  ODK_UINT32 Id_Machine_Reference;\r\n  ODK_UINT32 Id_Order_Reference;\r\n  ODK_UINT32 Id_Batch_Reference;\r\n  ODK_UINT32 Id_Ref_Subproduct_Type;\r\n  ODK_UINT32 Id_Ref_Service_Type;\r\n  ODK_UINT8 Id_Item_Number;\r\n  ODK_LDT Data_Initial_Time_Stamp;\r\n  ODK_LDT Data_Final_Time_Stamp;\r\n  ODK_LDT Data_Service_Time_Stamp;\r\n}plc2agent;\r\n#pragma pack(pop)\r\n\r\n#endif // ODK_Types_H
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Types.h b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Types.h
--- a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Types.h	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Types.h	(date 1617013340358)
@@ -2,15 +2,13 @@
  * This file is AUTO GENERATED - DO NOT MODIFY this file. 
  * This file contains the data types of ODK 1500S.
  *
- * File created by ODK_CodeGenerator version 205.100.101.18 
- * at Mon March 15 10:24:55 2021 
+ * File created by ODK_CodeGenerator version 200.0.3002.1 
+ * at lun marzo 29 11:33:17 2021 
  */
 
 #if !defined ODK_Types_H
 #define ODK_Types_H
 
-#include <stdint.h>
-
 #define  ODK_SUCCESS         0x0000
 #define  ODK_USER_ERROR_BASE 0xF000
 
@@ -19,29 +17,29 @@
 
 typedef  double              ODK_DOUBLE;
 typedef  float               ODK_FLOAT;
-typedef  int64_t             ODK_INT64;
-typedef  int32_t             ODK_INT32;
-typedef  int16_t             ODK_INT16;
-typedef  int8_t              ODK_INT8;
-typedef  uint64_t            ODK_UINT64;
-typedef  uint32_t            ODK_UINT32;
-typedef  uint16_t            ODK_UINT16;
-typedef  uint8_t             ODK_UINT8;
-typedef  uint64_t            ODK_LWORD;
-typedef  uint32_t            ODK_DWORD;
-typedef  uint16_t            ODK_WORD;
-typedef  uint8_t             ODK_BYTE;
-typedef  uint8_t             ODK_BOOL;
-typedef  int64_t             ODK_LTIME;
-typedef  int32_t             ODK_TIME;
-typedef  uint64_t            ODK_LDT;
-typedef  uint64_t            ODK_LTOD;
-typedef  uint32_t            ODK_TOD;
-typedef  uint8_t             ODK_S7STRING;
-typedef  uint16_t            ODK_S7WSTRING;
+typedef  long long           ODK_INT64;
+typedef  long                ODK_INT32;
+typedef  short               ODK_INT16;
+typedef  char                ODK_INT8;
+typedef  unsigned long long  ODK_UINT64;
+typedef  unsigned long       ODK_UINT32;
+typedef  unsigned short      ODK_UINT16;
+typedef  unsigned char       ODK_UINT8;
+typedef  unsigned long long  ODK_LWORD;
+typedef  unsigned long       ODK_DWORD;
+typedef  unsigned short      ODK_WORD;
+typedef  unsigned char       ODK_BYTE;
+typedef  unsigned char       ODK_BOOL;
+typedef  unsigned long long  ODK_LTIME;
+typedef  unsigned long       ODK_TIME;
+typedef  unsigned long long  ODK_LDT;
+typedef  unsigned long long  ODK_LTOD;
+typedef  unsigned long       ODK_TOD;
+typedef  unsigned char       ODK_S7STRING;
+typedef  unsigned short      ODK_S7WSTRING;
 typedef  wchar_t             ODK_WCHAR;
 typedef  char                ODK_CHAR;
-typedef  uint16_t            ODK_RESULT;
+typedef  unsigned short      ODK_RESULT;
 
 #pragma pack(push,1)
 typedef struct ODK_DTL_s
@@ -55,15 +53,14 @@
   ODK_UINT8       Second;
   ODK_UINT32      Nanosecond;
 } ODK_DTL;
-#pragma pack(pop)
 
-// VARIANT
-typedef struct ODK_VARIANT_s
+// CLASSIC_DB
+typedef struct ODK_CLASSIC_DB_s
 {
   ODK_UINT32    Len;
-  ODK_UINT8*    pData;
-} ODK_VARIANT;
-
+  ODK_UINT8     Data[1];
+} ODK_CLASSIC_DB;
+#pragma pack(pop)
 
 #pragma pack(push,1)
 typedef struct
Index: odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Functions.h
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * This file is AUTO GENERATED - DO NOT MODIFY this file. \r\n * This file contains the function prototypes of ODK 1500S.\r\n *\r\n * File created by ODK_CodeGenerator version 205.100.101.18\r\n * at Mon March 15 10:24:55 2021 \r\n*/\r\n\r\n#if !defined ODK_Functions_H\r\n#define ODK_Functions_H\r\n\r\n#include \"ODK_Types.h\"\r\n\r\n#ifdef DLL_EXPORT\r\n  #define EXPORT_API extern \"C\" __declspec(dllexport)\r\n#else\r\n  #define EXPORT_API extern \"C\"\r\n#endif\r\n\r\nODK_RESULT initAgent (\r\n);\r\n#define _ODK_FUNCTION_INITAGENT  ODK_RESULT initAgent ()\r\n\r\n//Agent Init\r\nODK_RESULT SampleWrite (\r\n  /*IN*/const control_flags& flags,\r\n  /*IN*/const plc2agent& str_out); //Sends the Agent message   \r\n#define _ODK_FUNCTION_SAMPLEWRITE  ODK_RESULT SampleWrite (/*IN*/const control_flags& flags, /*IN*/const plc2agent& str_out)\r\n\r\nODK_RESULT SampleRead (\r\n  /*OUT*/agent2plc& str_in,\r\n  /*OUT*/ODK_BOOL& tRecv,\r\n  /*OUT*/ODK_BOOL& tData,\r\n  /*INOUT*/control_flags& flags); //Receive the Agent message and parses the JSON to structure\r\n#define _ODK_FUNCTION_SAMPLEREAD  ODK_RESULT SampleRead (/*OUT*/agent2plc& str_in, /*OUT*/ODK_BOOL& tRecv, /*OUT*/ODK_BOOL& tData, /*INOUT*/control_flags& flags)\r\n\r\nODK_RESULT sendConf (\r\n);\r\n#define _ODK_FUNCTION_SENDCONF  ODK_RESULT sendConf ()\r\n\r\n#endif
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
diff --git a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Functions.h b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Functions.h
--- a/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Functions.h	(revision c24d70e160eb3a7247074ff71c02eabcd3e0acd1)
+++ b/odk/realPLC/ODK_AgentPLC_Real/ODK_AgentPLC_Real/src_cg_priv/ODK_Functions.h	(date 1617013340373)
@@ -2,8 +2,8 @@
  * This file is AUTO GENERATED - DO NOT MODIFY this file. 
  * This file contains the function prototypes of ODK 1500S.
  *
- * File created by ODK_CodeGenerator version 205.100.101.18
- * at Mon March 15 10:24:55 2021 
+ * File created by ODK_CodeGenerator version 200.0.3002.1
+ * at lun marzo 29 11:33:17 2021 
 */
 
 #if !defined ODK_Functions_H
@@ -22,17 +22,17 @@
 #define _ODK_FUNCTION_INITAGENT  ODK_RESULT initAgent ()
 
 //Agent Init
-ODK_RESULT SampleWrite (
-  /*IN*/const control_flags& flags,
-  /*IN*/const plc2agent& str_out); //Sends the Agent message   
-#define _ODK_FUNCTION_SAMPLEWRITE  ODK_RESULT SampleWrite (/*IN*/const control_flags& flags, /*IN*/const plc2agent& str_out)
+ODK_RESULT sendAgent (
+  /*IN*/const control_flags& str1,
+  /*IN*/const plc2agent& str2); //Sends the Agent message   
+#define _ODK_FUNCTION_SENDAGENT  ODK_RESULT sendAgent (/*IN*/const control_flags& str1, /*IN*/const plc2agent& str2)
 
-ODK_RESULT SampleRead (
-  /*OUT*/agent2plc& str_in,
+ODK_RESULT recvAgent (
+  /*OUT*/agent2plc& str2,
   /*OUT*/ODK_BOOL& tRecv,
   /*OUT*/ODK_BOOL& tData,
-  /*INOUT*/control_flags& flags); //Receive the Agent message and parses the JSON to structure
-#define _ODK_FUNCTION_SAMPLEREAD  ODK_RESULT SampleRead (/*OUT*/agent2plc& str_in, /*OUT*/ODK_BOOL& tRecv, /*OUT*/ODK_BOOL& tData, /*INOUT*/control_flags& flags)
+  /*INOUT*/control_flags& str1); //Receive the Agent message and parses the JSON to structure
+#define _ODK_FUNCTION_RECVAGENT  ODK_RESULT recvAgent (/*OUT*/agent2plc& str2, /*OUT*/ODK_BOOL& tRecv, /*OUT*/ODK_BOOL& tData, /*INOUT*/control_flags& str1)
 
 ODK_RESULT sendConf (
 );
